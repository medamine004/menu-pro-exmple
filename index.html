<!DOCTYPE html>
<html lang="fr" dir="ltr" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"/>
  <meta name="theme-color" content="#1e272e" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)">
  <title>The Guys â€¢ Menu Digital</title>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #d63031;
      --primary-dark: #b71c1c;
      --light: #f8f9fa;
      --dark: #1e272e;
      --gray: #636e72;
      --success: #00b894;
      --danger: #ff7675;
      
      --bg-body: var(--light);
      --text-main: var(--dark);
      --bg-header: rgba(255, 255, 255, 0.95);
      --text-header: var(--dark);
      --bg-card: white;
      --text-card-title: var(--dark);
      --text-card-desc: #555;
      --bg-category-btn: #dfe6e9;
      --text-category-btn: var(--dark);
      
      --bg-cart: white;
      --text-cart: var(--dark);
      --bg-modal: white;
      --border-light: #eee;
      --border-dark: #2d3748;
      
      --bg-footer: #f1f2f6;
      --text-footer: var(--dark);

      --vh: 1vh; 
    }

    :root.dark {
      --primary: #e84118;
      --bg-body: #000000;
      --text-main: #f5f6fa;
      --bg-header: rgba(0, 0, 0, 0.85);
      --text-header: #ffffff;
      --bg-card: #121212;
      --text-card-title: #ffffff;
      --text-card-desc: #b2bec3;
      --bg-category-btn: #2d3436;
      --text-category-btn: #dfe6e9;
      --bg-cart: #090909;
      --text-cart: #f5f6fa;
      --bg-modal: #121212;
      --border-light: #2d3436;
      --border-dark: #636e72;
      --bg-footer: #0a0a0a;
      --text-footer: #b2bec3;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    html, body {
      width: 100%;
      overflow-x: hidden;
      overscroll-behavior-y: none;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg-body);
      color: var(--text-main);
      line-height: 1.5;
      transition: background 0.4s ease, color 0.4s ease;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      min-height: calc(var(--vh, 1vh) * 100);
      padding-left: env(safe-area-inset-left);
      padding-right: env(safe-area-inset-right);
      padding-bottom: env(safe-area-inset-bottom);
    }

    input, select, textarea {
      font-size: 16px;
    }

    [dir="rtl"] body {
      font-family: 'Tajawal', sans-serif;
    }

    /* HEADER */
    .header-modern {
      background: var(--bg-header);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      color: var(--text-header);
      padding: 0.8rem 1rem;
      padding-top: max(0.8rem, env(safe-area-inset-top));
      position: sticky;
      top: 0;
      z-index: 2000;
      border-bottom: 1px solid rgba(255,255,255,0.05);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.6rem;
    }

    .logo-container {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .logo {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--primary);
    }

    .brand-text h1 {
      font-size: 1.2rem;
      margin: 0;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      background: linear-gradient(45deg, #fff, #ccc);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .brand-text .slogan {
      font-size: 0.7rem;
      opacity: 0.7;
      margin: 0;
      font-weight: 300;
      letter-spacing: 1px;
    }

    .header-controls {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .lang-switch {
      display: flex;
      background: rgba(255,255,255,0.08);
      border-radius: 30px;
      padding: 2px;
    }

    .lang-btn {
      background: transparent;
      border: none;
      color: var(--text-header);
      padding: 0.3rem 0.6rem;
      border-radius: 20px;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.7rem;
      transition: all 0.3s;
    }

    .lang-btn.active {
      background: var(--primary);
      color: white;
    }

    .cart-btn,
    .theme-toggle-btn {
      position: relative;
      background: transparent;
      border: 1px solid rgba(255,255,255,0.1);
      color: var(--text-header);
      font-size: 1.1rem;
      cursor: pointer;
      width: 38px;
      height: 38px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.3s ease;
    }

    .cart-count {
      position: absolute;
      top: -5px;
      right: -5px;
      background: var(--primary);
      color: white;
      font-size: 0.65rem;
      font-weight: 700;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid var(--bg-header);
    }

    /* PROMO MARQUEE */
    .promo-marquee {
      background: linear-gradient(90deg, #d63031, #e17055);
      color: white;
      overflow: hidden;
      white-space: nowrap;
      height: 40px;
      line-height: 40px;
      font-size: 0.85rem;
      font-weight: 600;
      position: relative;
      z-index: 900;
    }

    .marquee-content {
      display: inline-block;
      padding-left: 100%;
      animation: marquee 40s linear infinite;
    }

    @keyframes marquee {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    /* HERO VIDEO */
    .promo-video-wrapper {
      position: relative;
      width: 94%;
      max-width: 1200px;
      margin: 1rem auto;
      border-radius: 20px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.1);
    }

    .promo-video-wrapper::before {
      content: "";
      display: block;
      padding-top: 50%;
    }

    .promo-video {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* CATEGORIES */
    .container {
      max-width: 1280px;
      margin: 0 auto;
      padding: 0 1rem;
      flex: 1;
    }

    .categories-wrapper {
      position: sticky;
      top: calc(65px + env(safe-area-inset-top));
      z-index: 800;
      background: var(--bg-body);
      padding: 0.8rem 0;
      margin-bottom: 1rem;
      overflow-x: auto;
      white-space: nowrap;
      scrollbar-width: none;
    }

    .categories-wrapper::-webkit-scrollbar {
      display: none;
    }

    .categories {
      display: inline-flex;
      gap: 0.6rem;
      padding: 0 1rem;
    }

    .category-btn {
      padding: 0.5rem 1.2rem;
      border-radius: 50px;
      border: 1px solid rgba(255,255,255,0.1);
      background: var(--bg-category-btn);
      color: var(--text-category-btn);
      cursor: pointer;
      font-weight: 600;
      font-size: 0.85rem;
      transition: all 0.3s;
      flex-shrink: 0;
    }

    .category-btn.active {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    /* MENU GRID & CARDS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .menu-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

    .menu-card {
      min-height: auto;
      background: var(--bg-card);
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.06);
      box-shadow: 0 3px 10px rgba(0,0,0,0.08);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      height: auto !important;
      transition: transform 0.18s ease;
    }

    .product-image-wrapper {
  width: 100%;
  height: 110px;
  overflow: hidden;
  background: #111;
}

    .product-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .card-badge {
      position: absolute;
      top: 8px;
      left: 8px;
      background: rgba(0,0,0,0.75);
      backdrop-filter: blur(4px);
      color: white;
      font-size: 0.65rem;
      padding: 3px 8px;
      border-radius: 8px;
      font-weight: 700;
      z-index: 10;
    }

    .card-content {
      padding: 10px 12px 12px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      flex: none;
    }

    .card-title {
      font-size: 0.94rem;
      font-weight: 700;
      line-height: 1.24;
      color: var(--text-card-title);
    }

    .card-desc {
      font-size: 0.73rem;
      line-height: 1.36;
      color: var(--text-card-desc);
      flex: none;
      margin-bottom: 4px;
    }

    .card-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 4px;
      padding-top: 8px;
      border-top: 1px solid rgba(255,255,255,0.06);
    }

    .price {
      font-size: 0.98rem;
      font-weight: 800;
      color: var(--primary);
    }

    .add-btn {
      background: var(--text-main);
      color: var(--bg-body);
      border: none;
      padding: 6px 12px;
      border-radius: 8px;
      font-weight: 700;
      font-size: 0.78rem;
      cursor: pointer;
      min-width: 34px;
    }

    /* MOBILE OPTIMISATIONS */
   

  
    @media (max-width: 480px) {
  .menu-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
    padding: 0 6px 28px;
  }

  .card-content {
    padding: 6px 8px;
    gap: 4px;
  }

  .card-title {
    font-size: 12.5px;
    line-height: 1.2;
  }

  .card-desc {
    font-size: 10.5px;
    line-height: 1.3;
  }

  .price {
    font-size: 13px;
  }

  .add-btn {
    padding: 4px 8px;
    font-size: 11px;
  }
}

    /* FOOTER */
    .main-footer {
      background: var(--bg-footer);
      color: var(--text-footer);
      padding: 3rem 1.5rem 2rem;
      margin-top: 2rem;
      text-align: center;
      border-top: 1px solid rgba(255,255,255,0.05);
      padding-bottom: max(2rem, env(safe-area-inset-bottom));
    }

    .footer-content {
      max-width: 600px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1.2rem;
    }

    .footer-logo {
      font-size: 1.5rem;
      font-weight: 900;
      color: var(--text-header);
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    .footer-desc {
      font-size: 0.95rem;
      line-height: 1.6;
      opacity: 0.8;
      max-width: 400px;
    }

    .social-btn {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
      color: white;
      text-decoration: none;
      padding: 0.8rem 1.8rem;
      border-radius: 50px;
      font-weight: 600;
      margin: 1rem 0;
      font-size: 1rem;
    }

    .copyright {
      font-size: 0.8rem;
      opacity: 0.5;
      margin-top: 1rem;
    }

    /* CART PANEL (inchangÃ© pour ne pas casser la logique) */
    .cart-panel {
      position: fixed;
      right: 0;
      top: 0;
      width: 400px;
      max-width: 100%;
      height: 100vh;
      height: calc(var(--vh, 1vh) * 100);
      background: var(--bg-cart);
      color: var(--text-cart);
      transform: translateX(100%);
      transition: transform 0.4s cubic-bezier(0.16,1,0.3,1);
      z-index: 3000;
      display: flex;
      flex-direction: column;
      border-left: 1px solid var(--border-light);
      padding-top: env(safe-area-inset-top);
      padding-bottom: env(safe-area-inset-bottom);
      padding-right: env(safe-area-inset-right);
    }

    .cart-panel.open {
      transform: translateX(0);
    }

    .cart-header { padding: 1.5rem; border-bottom: 1px solid var(--border-light); display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.02); }
    [dir="rtl"] .cart-header { flex-direction: row-reverse; }

    .cart-body { flex: 1; overflow-y: auto; padding: 1.5rem; overscroll-behavior: contain; }

    .cart-item { display: flex; gap: 1rem; padding-bottom: 1rem; margin-bottom: 1rem; border-bottom: 1px solid var(--border-light); position: relative; }
    [dir="rtl"] .cart-item { flex-direction: row-reverse; text-align: right; }

    .cart-item-img { width: 70px; height: 70px; object-fit: cover; border-radius: 10px; }
    .cart-item-info { flex: 1; }
    .cart-item-title { font-weight: 700; font-size: 0.95rem; color: var(--text-main); display: block; margin-bottom: 4px;}
    .cart-item-supps { font-size: 0.75rem; color: var(--gray); margin-bottom: 4px; }
    
    .remove-btn {
      position: absolute; top: 0; right: 0; background: none; border: none; color: var(--danger);
      font-size: 1.1rem; cursor: pointer; opacity: 0.7; transition: opacity 0.2s; padding: 5px;
    }
    [dir="rtl"] .remove-btn { right: auto; left: 0; }

    .cart-footer { padding: 1.5rem; background: var(--bg-card); border-top: 1px solid var(--border-light); }
    .cart-total-row { display: flex; justify-content: space-between; font-size: 1.2rem; font-weight: 800; margin-bottom: 1.2rem; }
    [dir="rtl"] .cart-total-row { flex-direction: row-reverse; }

    .mode-switch { background: var(--bg-category-btn); padding: 4px; border-radius: 12px; display: flex; margin-bottom: 1.2rem; }
    .mode-option { flex: 1; text-align: center; padding: 0.8rem; cursor: pointer; border-radius: 10px; font-weight: 600; font-size: 0.9rem; transition: all 0.3s; color: var(--text-card-desc); }
    .mode-option.active { background: var(--bg-card); color: var(--primary); }

    .order-btn {
      width: 100%; padding: 1rem; background: var(--success); color: white; border: none;
      border-radius: 12px; font-size: 1.1rem; font-weight: 700; cursor: pointer;
      display: flex; align-items: center; justify-content: center; gap: 10px;
      transition: background 0.3s; touch-action: manipulation;
    }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       MODALS
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .modal {
      display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 5000;
      align-items: center; justify-content: center; backdrop-filter: blur(8px);
      height: 100%; height: calc(var(--vh, 1vh) * 100);
    }
    .modal.active { display: flex; animation: fadeIn 0.3s ease; }

    .modal-content {
      background: var(--bg-modal); color: var(--text-main); border-radius: 20px;
      width: 92%; max-width: 500px; max-height: 90vh; overflow-y: auto; 
      border: 1px solid var(--border-dark); display: flex; flex-direction: column;
      box-shadow: 0 20px 50px rgba(0,0,0,0.5);
    }

    .modal-header { padding: 1.2rem; border-bottom: 1px solid var(--border-light); display: flex; justify-content: space-between; align-items: center; }
    .modal-title { margin: 0; font-size: 1.2rem; font-weight: 700; }
    .modal-close { background: none; border: none; font-size: 1.8rem; cursor: pointer; color: var(--gray); padding: 5px; }
    .modal-body { padding: 1.2rem; flex: 1; overflow-y: auto; overscroll-behavior: contain; }

    .supplement-row { display: flex; justify-content: space-between; align-items: center; padding: 0.8rem 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
    [dir="rtl"] .supplement-row { flex-direction: row-reverse; }

    .qty-control { display: flex; align-items: center; gap: 10px; background: var(--bg-category-btn); padding: 4px 8px; border-radius: 30px; }
    .qty-btn { width: 28px; height: 28px; border-radius: 50%; border:none; background: var(--bg-card); color: var(--text-main); cursor: pointer; font-weight: bold; touch-action: manipulation; }
    .qty-val { width: 20px; text-align: center; font-weight: 600; font-size: 0.9rem; }

    .modal-footer { padding: 1.2rem; border-top: 1px solid var(--border-light); padding-bottom: max(1.2rem, env(safe-area-inset-bottom)); }
    .confirm-btn {
      width: 100%; padding: 1rem; background: var(--primary); color: white; border: none;
      border-radius: 12px; font-weight: 700; font-size: 1rem; cursor: pointer;
      display: flex; justify-content: space-between; touch-action: manipulation;
    }

    #success-message {
      position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px);
      background: var(--success); color: white; padding: 0.8rem 1.5rem; border-radius: 50px; 
      z-index: 6000; font-weight: 600; opacity: 0; transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      bottom: max(30px, calc(env(safe-area-inset-bottom) + 10px));
      font-size: 0.9rem;
      white-space: nowrap;
    }
    #success-message.show { transform: translateX(-50%) translateY(0); opacity: 1; }
    @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
    
    .table-input {
      width: 100%; padding: 0.8rem; margin-bottom: 1rem; background: var(--bg-category-btn);
      border: 2px solid transparent; border-radius: 10px; color: var(--text-main); font-size: 16px;
    }
    .table-input:focus { border-color: var(--primary); outline: none; }

    @media (max-width: 360px) {
  .menu-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 6px;
  }

  .product-image-wrapper {
    max-height: 95px;
  }

  .card-title {
    font-size: 11.5px;
  }

  .card-desc {
    font-size: 10px;
  }
}
  </style>
</head>
<body>

<header class="header-modern">
  <div class="logo-container">
    <img src="image/logo.jpeg" alt="Logo" class="logo">
    <div class="brand-text">
      <h1 id="brand-title">GOOD GUYS</h1>
      <p class="slogan" id="brand-slogan">Premium Street Food</p>
    </div>
  </div>

  <div class="header-controls">
    <div class="lang-switch">
      <button class="lang-btn active" onclick="setLang('fr')">FR</button>
      <button class="lang-btn" onclick="setLang('en')">EN</button>
      <button class="lang-btn" onclick="setLang('ar')">Ø¹Ø±Ø¨ÙŠ</button>
    </div>
    
    <button class="cart-btn" id="cart-toggle">
      <i class="fas fa-shopping-bag"></i>
      <span class="cart-count" id="cart-count">0</span>
    </button>

    <button class="theme-toggle-btn" id="theme-toggle">
      <i class="fas fa-sun"></i> </button>
  </div>
</header>

<div class="promo-marquee">
  <div class="marquee-content">
    <span>ğŸ”¥ <strong id="promo-1">NOUVEAU</strong> : Deep Dish Pizza Chicago Style !</span>
    <span>ğŸ” <strong>Two Guys Burger</strong> : Le best-seller du chef !</span>
    <span>ğŸŒ® <strong>Tacos GratinÃ©s</strong> : +3.0 DT seulement !</span>
    <span>ğŸŸ <strong>Poutine</strong> : L'authentique recette quÃ©bÃ©coise !</span>
  </div>
</div>

<div class="promo-video-wrapper">
  <video class="promo-video" autoplay loop muted playsinline poster="https://images.unsplash.com/photo-1561758033-d8f19662cb24?w=1200">
    <source src="video/good guys.mp4" type="video/mp4">
  </video>
  <div style="position:absolute; inset:0; background:linear-gradient(to top, var(--bg-body), transparent 30%);"></div>
</div>

<div class="container">
  <div class="categories-wrapper">
    <div class="categories" id="categories"></div>
  </div>
  <div class="menu-grid" id="menu-grid"></div>
</div>

<footer class="main-footer">
  <div class="footer-content">
    <div class="footer-logo">THE GUYS</div>
    <p class="footer-desc">
      DÃ©couvrez l'authenticitÃ© du Street Food revisitÃ©. Des ingrÃ©dients frais, des sauces maison et une passion pour le goÃ»t unique.
    </p>
    <a href="https://instagram.com/theguys_tn" target="_blank" class="social-btn">
      <i class="fab fa-instagram"></i> Suivez-nous sur Instagram
    </a>
    <div class="copyright">Â© 2026 THE GUYS. All rights reserved.</div>
  </div>
</footer>

<div class="cart-panel" id="cart-panel">
  <div class="cart-header">
    <h3 id="cart-title">Votre Panier</h3>
    <button class="modal-close" id="cart-close">Ã—</button>
  </div>
  
  <div class="cart-body" id="cart-items">
    </div>
  
  <div class="cart-footer">
    <div class="mode-switch">
      <div class="mode-option active" data-mode="surplace" onclick="setOrderMode('surplace')">Sur Place</div>
      <div class="mode-option" data-mode="emporter" onclick="setOrderMode('emporter')">Ã€ Emporter</div>
    </div>

    <div id="table-wrapper">
      <input type="number" id="table-number" class="table-input" placeholder="NumÃ©ro de table (Ex: 12)">
    </div>

    <div class="cart-total-row">
      <span>Total</span>
      <span id="cart-total">0.00 DT</span>
    </div>

    <button class="order-btn" id="confirm-order">
      <i class="fab fa-whatsapp"></i> <span id="btn-order-text">Commander</span>
    </button>
  </div>
</div>

<div class="modal" id="supplements-modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 class="modal-title" id="modal-product-name">Options</h3>
      <button class="modal-close" onclick="closeModal()">Ã—</button>
    </div>
    <div class="modal-body" id="supplements-list"></div>
    <div class="modal-footer">
      <button class="confirm-btn" onclick="addToCartConfirm()">
        <span id="btn-add-text">Ajouter</span>
        <span id="modal-total-price"></span>
      </button>
    </div>
  </div>
</div>

<div id="success-message">Commande ajoutÃ©e ! ğŸ˜‹</div>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// SYSTEME VIEWPORT / MOBILE FIX
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function setViewportHeight() {
    let vh = window.innerHeight * 0.01;
    document.documentElement.style.setProperty('--vh', `${vh}px`);
}
setViewportHeight();
window.addEventListener('resize', setViewportHeight);
window.addEventListener('orientationchange', () => setTimeout(setViewportHeight, 100));

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// DONNÃ‰ES DU MENU
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const products = [
  // --- SANDWICHES ---
  { id: "s1", cat: "Sandwiches", price: 9.9, img: "image/sandwish Escalope.jpg", name: {fr:"Classic", en:"Classic", ar:"ÙƒÙ„Ø§Ø³ÙŠÙƒ"}, desc: {fr:"Pain au choix, escalope marinÃ©e, salade, sauce", ar:"Ø®Ø¨Ø² Ø­Ø³Ø¨ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±ØŒ Ø§Ø³ÙƒØ§Ù„ÙˆØ¨ Ù…ØªØ¨Ù„ØŒ Ø³Ù„Ø·Ø©ØŒ ØµÙˆØµ"} },
  { id: "s2", cat: "Sandwiches", price: 9.9, img: "image/sandwich tikka.jpg", name: {fr:"Tikka", en:"Tikka", ar:"ØªÙŠÙƒØ§"}, desc: {fr:"Saveurs indiennes, Ã©pices tikka", ar:"Ù†ÙƒÙ‡Ø§Øª Ù‡Ù†Ø¯ÙŠØ©ØŒ Ø¨Ù‡Ø§Ø±Ø§Øª ØªÙŠÙƒØ§"} },
  { id: "s3", cat: "Sandwiches", price: 13.9, img: "image/sandwitsh spÃ©cial.jpg", name: {fr:"Buffalo", en:"Buffalo", ar:"Ø¨Ø§ÙØ§Ù„Ùˆ"}, desc: {fr:"Sauce buffalo Ã©picÃ©e, fromage fondant", ar:"ØµÙˆØµ Ø¨Ø§ÙØ§Ù„Ùˆ Ø­Ø§Ø±Ø©ØŒ Ø¬Ø¨Ù† Ø°Ø§Ø¦Ø¨"} },
  { id: "s4", cat: "Sandwiches", price: 13.9, img: "image/sandwis gringo.jpg", name: {fr:"Gringo", en:"Gringo", ar:"ØºØ±ÙŠÙ†ØºÙˆ"}, desc: {fr:"Style mexicain, piments doux, maÃ¯s", ar:"Ø³ØªØ§ÙŠÙ„ Ù…ÙƒØ³ÙŠÙƒÙŠØŒ ÙÙ„ÙÙ„ Ø­Ù„ÙˆØŒ Ø°Ø±Ø©"} },
  { id: "s5", cat: "Sandwiches", price: 11.9, img: "image/sandwish Mahbouli escalope.jpg", name: {fr:"Farmer", en:"Farmer", ar:"ÙØ§Ø±Ù…Ø±"}, desc: {fr:"Poulet, Å“uf, fromage, sauce ranch", ar:"Ø¯Ø¬Ø§Ø¬ØŒ Ø¨ÙŠØ¶ØŒ Ø¬Ø¨Ù†ØŒ ØµÙˆØµ Ø±Ø§Ù†Ø´"} },
  { id: "s6", cat: "Sandwiches", price: 11.9, img: "image/sandwitsh spÃ©cial.jpg", name: {fr:"Crunchy", en:"Crunchy", ar:"ÙƒØ±Ø§Ù†Ø´ÙŠ"}, desc: {fr:"Poulet croustillant, cheddar", ar:"Ø¯Ø¬Ø§Ø¬ Ù…Ù‚Ø±Ù…Ø´ØŒ Ø´ÙŠØ¯Ø±"} },
  { id: "s7", cat: "Sandwiches", price: 11.9, img: "image/sandwochs Chawarma.jpg", name: {fr:"Phillyâ€™s", en:"Phillyâ€™s", ar:"ÙÙŠÙ„ÙŠ"}, desc: {fr:"Steak Ã©mincÃ©, oignons caramÃ©lisÃ©s, fromage", ar:"Ø³ØªÙŠÙƒ Ù…ÙØ±ÙˆÙ…ØŒ Ø¨ØµÙ„ Ù…ÙƒØ±Ù…Ù„ØŒ Ø¬Ø¨Ù†"} },
  { id: "s8", cat: "Sandwiches", price: 16.9, img: "image/sandwich thon.jpg", name: {fr:"Viking", en:"Viking", ar:"ÙØ§ÙŠÙƒÙŠÙ†Øº"}, desc: {fr:"Double portion viande, bacon, fromage fumÃ©", ar:"ÙˆØ¬Ø¨Ø© Ù…Ø¶Ø§Ø¹ÙØ© Ù„Ø­Ù…ØŒ Ø¨Ø§ÙƒÙˆÙ†ØŒ Ø¬Ø¨Ù† Ù…Ø¯Ø®Ù†"} },
  // --- BURGERS ---
  { id: "b1", cat: "Burgers", price: 12.9, img: "https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=600", name: {fr:"One Guy", en:"One Guy", ar:"ÙˆØ§Ù† ØºØ§ÙŠ"}, desc: {fr:"BÅ“uf pur, cheddar, laitue, sauce maison", ar:"Ù„Ø­Ù… Ø¨Ù‚Ø±ÙŠ ØµØ§ÙÙŠØŒ Ø´ÙŠØ¯Ø±ØŒ Ø®Ø³ØŒ ØµÙˆØµ Ù…Ù†Ø²Ù„ÙŠ"} },
  { id: "b2", cat: "Burgers", price: 15.9, img: "https://images.unsplash.com/photo-1594212699903-ec8a3eca50f5?w=600", name: {fr:"Two Guys", en:"Two Guys", ar:"ØªÙˆ ØºØ§ÙŠØ²"}, desc: {fr:"Double steak, double cheddar", ar:"Ø¯ÙˆØ¨Ù„ Ø³ØªÙŠÙƒØŒ Ø¯ÙˆØ¨Ù„ Ø´ÙŠØ¯Ø±"} },
  { id: "b3", cat: "Burgers", price: 14.9, img: "https://images.unsplash.com/photo-1550547660-d9450f859349?w=600", name: {fr:"Wild Guy", en:"Wild Guy", ar:"ÙˆØ§ÙŠÙ„Ø¯ ØºØ§ÙŠ"}, desc: {fr:"Sauce BBQ fumÃ©e, oignons rings", ar:"ØµÙˆØµ Ø¨Ø§Ø±Ø¨ÙŠÙƒÙŠÙˆ Ù…Ø¯Ø®Ù†ØŒ Ø­Ù„Ù‚Ø§Øª Ø¨ØµÙ„"} },
  { id: "b4", cat: "Burgers", price: 15.9, img: "https://images.unsplash.com/photo-1596662951482-0c4ba74a6df6?w=600", name: {fr:"Crazy Egg", en:"Crazy Egg", ar:"ÙƒØ±ÙŠØ²ÙŠ Ø¥ÙŠØº"}, desc: {fr:"Steak, Å“uf au plat, bacon", ar:"Ø³ØªÙŠÙƒØŒ Ø¨ÙŠØ¶Ø© Ù…Ù‚Ù„ÙŠØ©ØŒ Ø¨Ø§ÙƒÙˆÙ†"} },
  { id: "b5", cat: "Burgers", price: 16.9, img: "image/Chiken Burgers.jpg", name: {fr:"SuprÃªme", en:"SuprÃªme", ar:"Ø³ÙˆØ¨Ø±ÙŠÙ…"}, desc: {fr:"Recette premium chef special", ar:"ÙˆØµÙØ© Ø§Ù„Ø´ÙŠÙ Ø§Ù„Ø®Ø§ØµØ©"} },
  { id: "b6", cat: "Burgers", price: 11.9, img: "image/Beef burgers.jpg", name: {fr:"Crispy", en:"Crispy", ar:"ÙƒØ±ÙŠØ³Ø¨ÙŠ"}, desc: {fr:"Poulet panÃ© croustillant", ar:"Ø¯Ø¬Ø§Ø¬ Ø¨Ø§Ù†ÙŠÙ‡ Ù…Ù‚Ø±Ù…Ø´"} },
  { id: "b7", cat: "Burgers", price: 16.9, img: "https://images.unsplash.com/photo-1607013251379-e6eecfffe234?w=600", name: {fr:"Superb", en:"Superb", ar:"Ø³ÙˆØ¨Ø±Ø¨"}, desc: {fr:"Champignons sautÃ©s, sauce suisse", ar:"ÙØ·Ø± Ø³ÙˆØªÙŠÙ‡ØŒ ØµÙˆØµ Ø³ÙˆÙŠØ³Ø±ÙŠ"} },
  { id: "b8", cat: "Burgers", price: 16.9, img: "image/hamberger.jpg", name: {fr:"Tartufo", en:"Tartufo", ar:"ØªØ§Ø±ØªÙˆÙÙˆ"}, desc: {fr:"CrÃ¨me de truffe, parmesan", ar:"ÙƒØ±ÙŠÙ…Ø© Ø§Ù„ÙƒÙ…Ø£Ø©ØŒ Ø¨Ø§Ø±Ù…ÙŠØ²Ø§Ù†"} },
  { id: "b9", cat: "Burgers", price: 16.9, img: "https://images.unsplash.com/photo-1551782450-a2132b4ba21d?w=600", name: {fr:"ExtrÃªme", en:"ExtrÃªme", ar:"Ø¥ÙƒØ³ØªØ±ÙŠÙ…"}, desc: {fr:"Piquant, JalapeÃ±os, Sauce forte", ar:"Ø­Ø§Ø±ØŒ Ù‡Ø§Ù„Ø¨ÙŠÙ†ÙˆØŒ ØµÙˆØµ Ø­Ø§Ø±"} },
  // --- TACOS ---
  { id: "t1", cat: "Tacos", price: 11.9, img: "image/tacos chawarma.jpg", name: {fr:"Frenchy", en:"Frenchy", ar:"ÙØ±ÙŠÙ†Ø´ÙŠ"}, desc: {fr:"Cordon bleu, sauce fromagÃ¨re", ar:"ÙƒÙˆØ±Ø¯ÙˆÙ† Ø¨Ù„ÙˆØŒ ØµÙˆØµ Ø¬Ø¨Ù†"} },
  { id: "t2", cat: "Tacos", price: 11.9, img: "image/tacos poulet.jpg", name: {fr:"Crousti", en:"Crousti", ar:"ÙƒØ±ÙˆØ³ØªÙŠ"}, desc: {fr:"Nuggets, frites, cheddar", ar:"Ù†Ø§ØºØªØ³ØŒ Ø¨Ø·Ø§Ø·Ø§ØŒ Ø´ÙŠØ¯Ø±"} },
  { id: "t3", cat: "Tacos", price: 11.9, img: "image/Tackos.jpg", name: {fr:"Spicy Guy", en:"Spicy Guy", ar:"Ø³Ø¨Ø§ÙŠØ³ÙŠ ØºØ§ÙŠ"}, desc: {fr:"Viande hachÃ©e Ã©picÃ©e, harissa mayo", ar:"Ù„Ø­Ù… Ù…ÙØ±ÙˆÙ… Ø­Ø§Ø±ØŒ Ù‡Ø±ÙŠØ³Ø© Ù…Ø§ÙŠÙˆ"} },
  { id: "t4", cat: "Tacos", price: 11.9, img: "https://images.unsplash.com/photo-1552332386-f8dd00dc2f85?w=600", name: {fr:"Lyonnais", en:"Lyonnais", ar:"Ù„ÙŠÙˆÙ†ÙŠ"}, desc: {fr:"Sauce gruyÃ¨re, escalope", ar:"ØµÙˆØµ ØºØ±ÙˆÙŠÙŠØ±ØŒ Ø§Ø³ÙƒØ§Ù„ÙˆØ¨"} },
  { id: "t5", cat: "Tacos", price: 15.9, img: "https://images.unsplash.com/photo-1504544750208-dc0358e63f7f?w=600", name: {fr:"Tasty", en:"Tasty", ar:"ØªÙŠØ³ØªÙŠ"}, desc: {fr:"MÃ©lange viandes, sauce algÃ©rienne", ar:"Ø®Ù„ÙŠØ· Ù„Ø­ÙˆÙ…ØŒ ØµÙˆØµ Ø¬Ø²Ø§Ø¦Ø±ÙŠØ©"} },
  { id: "t6", cat: "Tacos", price: 16.9, img: "https://images.unsplash.com/photo-1615870216519-2f9fa575fa5c?w=600", name: {fr:"Cheesy", en:"Cheesy", ar:"ØªØ´ÙŠØ²ÙŠ"}, desc: {fr:"Explosion de fromages", ar:"Ø§Ù†ÙØ¬Ø§Ø± Ø£Ø¬Ø¨Ø§Ù†"} },
  { id: "t7", cat: "Tacos", price: 16.9, img: "https://images.unsplash.com/photo-1551504734-5ee1c4a1479b?w=600", name: {fr:"Lâ€™Italo", en:"Lâ€™Italo", ar:"Ø¥ÙŠØªØ§Ù„Ùˆ"}, desc: {fr:"Mozzarella, pesto, tomates sÃ©chÃ©es", ar:"Ù…ÙˆØ²Ø§Ø±ÙŠÙ„Ø§ØŒ Ø¨ÙŠØ³ØªÙˆØŒ Ø·Ù…Ø§Ø·Ù… Ù…Ø¬ÙÙØ©"} },
  // --- TENDERS ---
  { id: "tn1", cat: "Tenders Box", price: 11.9, img: "image/3 Tenders.jpg", name: {fr:"3 Tenders", en:"3 Tenders", ar:"Ù£ ØªÙ†Ø¯Ø±Ø²"}, desc: {fr:"3 piÃ¨ces panÃ©es maison + sauce", ar:"Ù£ Ù‚Ø·Ø¹ Ø¯Ø¬Ø§Ø¬ Ù…Ù‚Ø±Ù…Ø´ + ØµÙˆØµ"} },
  { id: "tn2", cat: "Tenders Box", price: 21.9, img: "image/6 Tenders.jpg", name: {fr:"6 Tenders", en:"6 Tenders", ar:"Ù¦ ØªÙ†Ø¯Ø±Ø²"}, desc: {fr:"6 piÃ¨ces panÃ©es maison + 2 sauces", ar:"Ù¦ Ù‚Ø·Ø¹ Ø¯Ø¬Ø§Ø¬ Ù…Ù‚Ø±Ù…Ø´ + Ù¢ ØµÙˆØµ"} },
  // --- FRIES & POUTINE ---
  { id: "fp1", cat: "Fries & Poutine", price: 18.9, img: "image/Poutine 1.jpg", name: {fr:"Poutine 1", en:"Poutine 1", ar:"Ø¨ÙˆØªÙŠÙ† Ù¡"}, desc: {fr:"Frites, fromage en grains, sauce brune", ar:"Ø¨Ø·Ø§Ø·Ø§ØŒ Ø¬Ø¨Ù†ØŒ ØµÙˆØµ Ø¨Ù†ÙŠ"} },
  { id: "fp2", cat: "Fries & Poutine", price: 24.9, img: "image/Poutine 2.jpg", name: {fr:"Poutine 2", en:"Poutine 2", ar:"Ø¨ÙˆØªÙŠÙ† Ù¢"}, desc: {fr:"Version XL avec viande hachÃ©e", ar:"Ø­Ø¬Ù… ÙƒØ¨ÙŠØ± Ù…Ø¹ Ù„Ø­Ù… Ù…ÙØ±ÙˆÙ…"} },
  // --- BOWLS ---
  { id: "bw1", cat: "Bowls", price: 14.9, img: "image/Pasta Chicky's.jpg", name: {fr:"Pasta Chicky's", en:"Pasta Chicky's", ar:"Ø¨Ø§Ø³ØªØ§ ØªØ´ÙŠÙƒÙŠØ²"}, desc: {fr:"PÃ¢tes crÃ©meuses au poulet", ar:"Ù…Ø¹ÙƒØ±ÙˆÙ†Ø© Ø¨Ø§Ù„ÙƒØ±ÙŠÙ…Ø© ÙˆØ§Ù„Ø¯Ø¬Ø§Ø¬"} },
  { id: "bw2", cat: "Bowls", price: 15.9, img: "https://images.unsplash.com/photo-1555949258-eb67b1ef0ceb?w=600", name: {fr:"Pasta 5th Avenue", en:"Pasta 5th Avenue", ar:"Ø¨Ø§Ø³ØªØ§ ÙÙŠÙØª Ø£ÙÙŠÙ†ÙŠÙˆ"}, desc: {fr:"Sauce rosÃ©e, champignons", ar:"ØµÙˆØµ ÙˆØ±Ø¯ÙŠØŒ ÙØ·Ø±"} },
  { id: "bw3", cat: "Bowls", price: 13.9, img: "https://images.unsplash.com/photo-1612927601601-6638404737ce?w=600", name: {fr:"Rice Jiggy", en:"Rice Jiggy", ar:"Ø£Ø±Ø² Ø¬ÙŠØºÙŠ"}, desc: {fr:"Riz Ã©picÃ©, lÃ©gumes sautÃ©s", ar:"Ø£Ø±Ø² Ù…Ø¨Ù‡Ø±ØŒ Ø®Ø¶Ø§Ø± Ø³ÙˆØªÙŠÙ‡"} },
  { id: "bw4", cat: "Bowls", price: 16.9, img: "https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=600", name: {fr:"Salad Rustic", en:"Salad Rustic", ar:"Ø³Ù„Ø·Ø© Ø±ÙˆØ³ØªÙŠÙƒ"}, desc: {fr:"MÃ©lange vert, noix, fromage bleu", ar:"Ø®Ø¶Ø±ÙˆØ§ØªØŒ Ø¬ÙˆØ²ØŒ Ø¬Ø¨Ù† Ø£Ø²Ø±Ù‚"} },
  // --- GRILL CHICKEN ---
  { id: "gr1", cat: "Grill Chicken", price: 12.0, img: "image/Cuisse.jpg", name: {fr:"Cuisse", en:"Leg", ar:"ÙØ®Ø° Ø¯Ø¬Ø§Ø¬"}, desc: {fr:"GrillÃ© Ã  la flamme (12h-18h)", ar:"Ù…Ø´ÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù„Ù‡Ø¨ (Ù¡Ù¢-Ù¡Ù¨)"} },
  { id: "gr2", cat: "Grill Chicken", price: 22.0, img: "image/Demi-poulet.jpg", name: {fr:"Demi-poulet", en:"Half Chicken", ar:"Ù†ØµÙ Ø¯Ø¬Ø§Ø¬Ø©"}, desc: {fr:"MarinÃ© et grillÃ© + garniture", ar:"Ù…ØªØ¨Ù„ ÙˆÙ…Ø´ÙˆÙŠ + Ù…Ù‚Ø¨Ù„Ø§Øª"} },
  { id: "gr3", cat: "Grill Chicken", price: 40.0, img: "https://images.unsplash.com/photo-1532550907401-a500c9a57435?w=600", name: {fr:"Poulet Entier", en:"Whole Chicken", ar:"Ø¯Ø¬Ø§Ø¬Ø© ÙƒØ§Ù…Ù„Ø©"}, desc: {fr:"Parfait pour partager", ar:"Ù…Ø«Ø§Ù„ÙŠ Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ©"} },
  // --- PARTY BOX ---
  { id: "pb1", cat: "Party Box", price: 59.9, img: "image/Mix burgers & tacos pour 3-4.jpg", name: {fr:"Combo Friends", en:"Combo Friends", ar:"ÙƒÙˆÙ…Ø¨Ùˆ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡"}, desc: {fr:"Mix burgers & tacos pour 3-4", ar:"Ù…ÙŠÙƒØ³ Ø¨Ø±ØºØ± ÙˆØªØ§ÙƒÙˆØ³ Ù„Ù€ Ù£-Ù¤ Ø£Ø´Ø®Ø§Øµ"} },
  { id: "pb2", cat: "Party Box", price: 79.9, img: "image/Combo Family.jpg", name: {fr:"Combo Family", en:"Combo Family", ar:"ÙƒÙˆÙ…Ø¨Ùˆ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©"}, desc: {fr:"Le festin familial ultime", ar:"ÙˆÙ„ÙŠÙ…Ø© Ø¹Ø§Ø¦Ù„ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø©"} },
  { id: "pb3", cat: "Party Box", price: 99.9, img: "image/Combo guys.jpg", name: {fr:"Combo Guys", en:"Combo Guys", ar:"ÙƒÙˆÙ…Ø¨Ùˆ ØºØ§ÙŠØ²"}, desc: {fr:"L'expÃ©rience complÃ¨te The Guys", ar:"ØªØ¬Ø±Ø¨Ø© Ø°Ø§ ØºØ§ÙŠØ² Ø§Ù„ÙƒØ§Ù…Ù„Ø©"} },
  // --- DEEP DISH PIZZA ---
  { id: "dd1", cat: "Deep Dish Pizza", price: 24.9, img: "https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=600", name: {fr:"Chicago", en:"Chicago", ar:"Ø´ÙŠÙƒØ§ØºÙˆ"}, desc: {fr:"PÃ¢te Ã©paisse, extra fromage, pepperoni", ar:"Ø¹Ø¬ÙŠÙ†Ø© Ø³Ù…ÙŠÙƒØ©ØŒ Ø¬Ø¨Ù† Ø¥Ø¶Ø§ÙÙŠØŒ Ø¨ÙŠØ¨ÙŠØ±ÙˆÙ†ÙŠ"} },
  { id: "dd2", cat: "Deep Dish Pizza", price: 24.9, img: "https://images.unsplash.com/photo-1574071318508-1cdbab80d002?w=600", name: {fr:"Riccardo", en:"Riccardo", ar:"Ø±ÙŠÙƒØ§Ø±Ø¯Ùˆ"}, desc: {fr:"Sauce tomate, basilic, mozzarella", ar:"ØµÙ„ØµØ© Ø·Ù…Ø§Ø·Ù…ØŒ Ø±ÙŠØ­Ø§Ù†ØŒ Ù…ÙˆØ²Ø§Ø±ÙŠÙ„Ø§"} },
  { id: "dd3", cat: "Deep Dish Pizza", price: 24.9, img: "image/pizza 4 fromage.jpg", name: {fr:"Crispy Guys", en:"Crispy Guys", ar:"ÙƒØ±ÙŠØ³Ø¨ÙŠ ØºØ§ÙŠØ²"}, desc: {fr:"Poulet crispy, sauce blanche", ar:"Ø¯Ø¬Ø§Ø¬ ÙƒØ±ÙŠØ³Ø¨ÙŠØŒ ØµÙˆØµ Ø£Ø¨ÙŠØ¶"} },
  { id: "dd4", cat: "Deep Dish Pizza", price: 29.9, img: "https://images.unsplash.com/photo-1604382355076-af4b0eb60143?w=600", name: {fr:"Ricky", en:"Ricky", ar:"Ø±ÙŠÙƒÙŠ"}, desc: {fr:"SpÃ©cialitÃ© du chef, bords fourrÃ©s", ar:"ØªØ®ØµØµ Ø§Ù„Ø´ÙŠÙØŒ Ø£Ø·Ø±Ø§Ù Ù…Ø­Ø´ÙˆØ©"} },
  // --- BOISSONS ---
  { id: "dr1", cat: "Boissons", price: 2.0, img: "image/Eau 0.5 L.jpg", name: {fr:"Eau MinÃ©rale", en:"Water", ar:"Ù…Ø§Ø¡ Ù…Ø¹Ø¯Ù†ÙŠ"}, desc: {fr:"0.5L", ar:"Ù .Ù¥ Ù„ØªØ±"} },
  { id: "dr2", cat: "Boissons", price: 3.5, img: "https://images.unsplash.com/photo-1622483767028-3f66f32aef97?w=600", name: {fr:"Canette", en:"Soda Can", ar:"Ù…Ø´Ø±ÙˆØ¨ ØºØ§Ø²ÙŠ"}, desc: {fr:"Coca, Fanta, Boga...", ar:"ÙƒÙˆÙƒØ§ØŒ ÙØ§Ù†ØªØ§ØŒ Ø¨ÙˆÙ‚Ø§..."} },
  { id: "dr3", cat: "Boissons", price: 4.5, img: "https://images.unsplash.com/photo-1513558161293-cdaf765ed2fd?w=600", name: {fr:"Citronnade", en:"Lemonade", ar:"Ø¹ØµÙŠØ± Ù„ÙŠÙ…ÙˆÙ†"}, desc: {fr:"Frais maison", ar:"Ø·Ø§Ø²Ø¬ Ù…Ù†Ø²Ù„ÙŠ"} }
];

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// LOGIQUE
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const commonSupplements = [ { id: "menu_opt", name: {fr:"Menu (Frites + Boisson)", en:"Meal Deal (Fries+Drink)", ar:"ÙˆØ¬Ø¨Ø© (Ø¨Ø·Ø§Ø·Ø§ + Ù…Ø´Ø±ÙˆØ¨)"}, price: 4.0 } ];
const tacoSupplements = [ { id: "gratine", name: {fr:"GratinÃ© / Farci", en:"Gratin/Stuffed", ar:"ØºØ±Ø§ØªØ§Ù† / Ù…Ø­Ø´ÙŠ"}, price: 3.0 }, ...commonSupplements ];

const translations = {
  fr: { cartTitle: "Votre Panier", order: "Commander sur WhatsApp", total: "Total", add: "Ajouter", surplace: "Sur Place", emporter: "Ã€ Emporter", placeholder: "NumÃ©ro de table (Ex: 12)", added: "AjoutÃ© au panier ! ğŸ˜‹" },
  en: { cartTitle: "Your Cart", order: "Order via WhatsApp", total: "Total", add: "Add", surplace: "Eat In", emporter: "Takeaway", placeholder: "Table Number (Ex: 12)", added: "Added to cart! ğŸ˜‹" },
  ar: { cartTitle: "Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª", order: "Ø§Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨", total: "Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹", add: "Ø£Ø¶Ù", surplace: "ÙÙŠ Ø§Ù„Ù…Ø­Ù„", emporter: "Ø³ÙØ±ÙŠ", placeholder: "Ø±Ù‚Ù… Ø§Ù„Ø·Ø§ÙˆÙ„Ø© (Ù…Ø«Ø§Ù„: Ù¡Ù¢)", added: "ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©! ğŸ˜‹" }
};

let cart = [];
let currentLang = 'fr';
let orderMode = 'surplace';
let currentProduct = null;
let currentSupplements = [];
let WHATSAPP_NUMBER = "21658052184";

function init() {
  renderCategories();
  renderMenu('all');
  updateTexts();
  if(!localStorage.getItem('theme')) document.documentElement.classList.add('dark');
  else {
    if(localStorage.getItem('theme') === 'dark') document.documentElement.classList.add('dark');
    else document.documentElement.classList.remove('dark');
  }
  updateThemeIcon();
  attachAddButtonListeners(); // Nouvelle fonction pour attacher les listeners
}

function renderCategories() {
  const cats = [...new Set(products.map(p => p.cat))];
  const container = document.getElementById('categories');
  container.innerHTML = '';

  const allText = currentLang === 'ar' ? 'Ø§Ù„ÙƒÙ„' : 'All';
  container.innerHTML += `<button class="category-btn active" onclick="filterMenu('all', this)">${allText}</button>`;

  cats.forEach(c => {
    let display = c;
    if(currentLang === 'ar') {
      const map = {"Sandwiches":"Ø³Ù†Ø¯ÙˆÙŠØ´Ø§Øª", "Burgers":"Ø¨Ø±ØºØ±", "Tacos":"ØªØ§ÙƒÙˆØ³", "Tenders Box":"ØªÙ†Ø¯Ø±Ø²", "Fries & Poutine":"Ø¨Ø·Ø§Ø·Ø§ ÙˆØ¨ÙˆØªÙŠÙ†", "Bowls":"Ø£Ø·Ø¨Ø§Ù‚", "Grill Chicken":"Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠ", "Party Box":"Ø¨ÙˆÙƒØ³ Ø­ÙÙ„Ø§Øª", "Deep Dish Pizza":"Ø¨ÙŠØªØ²Ø§ Ø¯ÙŠØ¨ Ø¯ÙŠØ´", "Boissons":"Ù…Ø´Ø±ÙˆØ¨Ø§Øª"};
      display = map[c] || c;
    }
    container.innerHTML += `<button class="category-btn" onclick="filterMenu('${c}', this)">${display}</button>`;
  });
}

function renderMenu(cat) {
  const grid = document.getElementById('menu-grid');
  grid.innerHTML = '';
  const items = cat === 'all' ? products : products.filter(p => p.cat === cat);
  
  items.forEach(p => {
    const card = document.createElement('div');
    card.className = 'menu-card';
    card.dataset.id = p.id; // Ajout du data-id pour identifier le produit
    
    card.innerHTML = `
      <div class="product-image-wrapper">
        <img src="${p.img}" class="product-image" loading="lazy" alt="${p.name[currentLang]}">
        ${(p.cat === 'Sandwiches' || p.cat === 'Burgers' || p.cat === 'Tacos') ? '<div class="card-badge">+ Menu Option</div>' : ''}
      </div>
      <div class="card-content">
        <div class="card-header">
          <div class="card-title">${p.name[currentLang]}</div>
        </div>
        <div class="card-desc">${p.desc[currentLang]}</div>
        <div class="card-footer">
          <div class="price">${p.price.toFixed(2)} DT</div>
          <button class="add-btn" data-product-id="${p.id}">
            <i class="fas fa-plus"></i>
          </button>
        </div>
      </div>
    `;
    grid.appendChild(card);
  });
  attachAddButtonListeners(); // RÃ©attacher aprÃ¨s rendu dynamique
}

function attachAddButtonListeners() {
  const grid = document.getElementById('menu-grid');
  grid.removeEventListener('click', handleAddClick); // Ã‰viter les doublons
  grid.addEventListener('click', handleAddClick);
}

function handleAddClick(e) {
  const btn = e.target.closest('.add-btn');
  if (!btn) return;
  
  const card = btn.closest('.menu-card');
  if (!card) return;
  
  const productId = btn.dataset.productId;
  const product = products.find(p => p.id === productId);
  
  if (product) {
    openProductModal(product);
  } else {
    console.warn('Produit non trouvÃ© pour ID:', productId);
  }
}

function filterMenu(cat, btn) {
  document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  renderMenu(cat);
}

function openProductModal(product) {
  let supps = [];
  if (['Sandwiches', 'Burgers'].includes(product.cat)) supps = commonSupplements;
  else if (product.cat === 'Tacos') supps = tacoSupplements;
  
  if(supps.length === 0) {
    addToCart(product, []);
    return;
  }
  currentProduct = product;
  currentSupplements = supps.map(s => ({...s, qty:0}));
  document.getElementById('modal-product-name').innerText = product.name[currentLang];
  renderSupplementsList();
  updateModalTotal();
  const modal = document.getElementById('supplements-modal');
  modal.style.display = 'flex';
  setTimeout(() => modal.classList.add('active'), 10);
}

function renderSupplementsList() {
  const container = document.getElementById('supplements-list');
  container.innerHTML = '';
  currentSupplements.forEach((s, idx) => {
    container.innerHTML += `
      <div class="supplement-row">
        <div>
          <div style="font-weight:600;">${s.name[currentLang]}</div>
          <div style="color:var(--primary); font-size:0.9rem;">+${s.price.toFixed(2)} DT</div>
        </div>
        <div class="qty-control">
          <button class="qty-btn" onclick="updateSuppQty(${idx}, -1)">-</button>
          <span class="qty-val">${s.qty}</span>
          <button class="qty-btn" onclick="updateSuppQty(${idx}, 1)">+</button>
        </div>
      </div>
    `;
  });
}

function updateSuppQty(idx, delta) {
  const s = currentSupplements[idx];
  if(s.qty + delta >= 0) {
    s.qty += delta;
    renderSupplementsList();
    updateModalTotal();
  }
}

function updateModalTotal() {
  let total = currentProduct.price;
  currentSupplements.forEach(s => total += (s.price * s.qty));
  document.getElementById('modal-total-price').innerText = total.toFixed(2) + " DT";
}

function closeModal() {
  const modal = document.getElementById('supplements-modal');
  modal.classList.remove('active');
  setTimeout(() => modal.style.display = 'none', 300);
}

function addToCartConfirm() {
  const activeSupps = currentSupplements.filter(s => s.qty > 0);
  addToCart(currentProduct, activeSupps);
  closeModal();
}

function addToCart(product, supps) {
  const suppKey = JSON.stringify(supps.map(s => ({id:s.id, qty:s.qty})));
  const existing = cart.find(i => i.pid === product.id && i.suppKey === suppKey);
  if(existing) existing.qty++;

  else cart.push({ pid: product.id, name: product.name, price: product.price, img: product.img, qty: 1, supps: supps, suppKey: suppKey });
  renderCart();
  showToast();
  document.getElementById('cart-panel').classList.add('open');
}

function renderCart() {
  const container = document.getElementById('cart-items');
  container.innerHTML = '';
  let total = 0;
  let count = 0;
  cart.forEach((item, index) => {
    let itemPrice = item.price;
    let suppText = '';
    item.supps.forEach(s => {
      itemPrice += (s.price * s.qty);
      suppText += `<div>+ ${s.name[currentLang]} (x${s.qty})</div>`;
    });
    const lineTotal = itemPrice * item.qty;
    total += lineTotal;
    count += item.qty;
    container.innerHTML += `
      <div class="cart-item">
        <img src="${item.img}" class="cart-item-img">
        <div class="cart-item-info">
          <span class="cart-item-title">${item.name[currentLang]} (x${item.qty})</span>
          ${suppText ? `<div class="cart-item-supps">${suppText}</div>` : ''}
          <div style="font-weight:700; margin-top:4px;">${lineTotal.toFixed(2)} DT</div>
        </div>
        <button class="remove-btn" onclick="removeItem(${index})"><i class="fas fa-trash"></i></button>
      </div>
    `;
  });
  document.getElementById('cart-total').innerText = total.toFixed(2) + " DT";
  document.getElementById('cart-count').innerText = count;
  if(cart.length === 0) container.innerHTML = `<div style="text-align:center; padding:2rem; opacity:0.6;">${currentLang==='ar'?'Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©':'Panier vide'}</div>`;
}

function removeItem(index) {
  cart.splice(index, 1);
  renderCart();
}

document.getElementById('confirm-order').onclick = () => {
  if(cart.length === 0) return;
  const tableInput = document.getElementById('table-number');
  if(orderMode === 'surplace' && !tableInput.value.trim()) {
    tableInput.style.borderColor = 'var(--danger)';
    tableInput.focus();
    setTimeout(() => tableInput.style.borderColor = '', 2000);
    return;
  }
  
  const todayStr = new Date().toDateString();
  const lastDate = localStorage.getItem('theguys_last_date');
  let orderCount = parseInt(localStorage.getItem('theguys_order_count') || '0');

  if(lastDate !== todayStr) {
    orderCount = 1;
    localStorage.setItem('theguys_last_date', todayStr);
  } else {
    orderCount++;
  }
  localStorage.setItem('theguys_order_count', orderCount);
  
  let orderTitle = "";
  if(currentLang === 'fr') orderTitle = `Nouvelle commande #${orderCount}`;
  else if(currentLang === 'en') orderTitle = `New Order #${orderCount}`;
  else orderTitle = `Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ø±Ù‚Ù… ${orderCount}`;

  let msg = `*${orderTitle}*\n`;
  msg += `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n`;
  msg += `ğŸ“… ${new Date().toLocaleString(currentLang)}\n`;
  msg += `ğŸ“ Type: *${orderMode === 'surplace' ? 'Sur Place (Table ' + tableInput.value + ')' : 'Ã€ Emporter'}*\n`;
  msg += `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\n`;
  
  let grandTotal = 0;
  cart.forEach(item => {
    let itemTotal = item.price;
    item.supps.forEach(s => itemTotal += (s.price * s.qty));
    const lineTotal = itemTotal * item.qty;
    grandTotal += lineTotal;
    msg += `â–«ï¸ *${item.qty}x ${item.name.fr}*\n`;
    if(item.supps.length) {
      item.supps.forEach(s => msg += `   + ${s.name.fr} (x${s.qty})\n`);
    }
    msg += `   ğŸ’° ${lineTotal.toFixed(2)} DT\n\n`;
  });
  
  msg += `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n`;
  msg += `*TOTAL: ${grandTotal.toFixed(2)} DT*`;
  
  window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`, '_blank');
  
  cart = [];
  renderCart();
  document.getElementById('cart-panel').classList.remove('open');
};

function setLang(l) {
  currentLang = l;
  document.documentElement.lang = l;
  document.documentElement.dir = l === 'ar' ? 'rtl' : 'ltr';
  document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
  event.target.classList.add('active');
  updateTexts();
  renderCategories();
  renderMenu('all');
  renderCart(); 
}

function updateTexts() {
  const t = translations[currentLang];
  document.getElementById('cart-title').innerText = t.cartTitle;
  document.getElementById('btn-order-text').innerText = t.order;
  document.getElementById('table-number').placeholder = t.placeholder;
  document.getElementById('success-message').innerText = t.added;
  document.querySelector('[data-mode="surplace"]').innerText = t.surplace;
  document.querySelector('[data-mode="emporter"]').innerText = t.emporter;
}

function setOrderMode(mode) {
  orderMode = mode;
  document.querySelectorAll('.mode-option').forEach(el => el.classList.remove('active'));
  document.querySelector(`[data-mode="${mode}"]`).classList.add('active');
  const tableWrap = document.getElementById('table-wrapper');
  if(mode === 'surplace') tableWrap.style.display = 'block';
  else tableWrap.style.display = 'none';
}

function showToast() {
  const t = document.getElementById('success-message');
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2500);
}

document.getElementById('cart-toggle').onclick = () => document.getElementById('cart-panel').classList.add('open');
document.getElementById('cart-close').onclick = () => document.getElementById('cart-panel').classList.remove('open');
document.getElementById('theme-toggle').onclick = () => {
  document.documentElement.classList.toggle('dark');
  const isDark = document.documentElement.classList.contains('dark');
  localStorage.setItem('theme', isDark ? 'dark' : 'light');
  updateThemeIcon();
};

function updateThemeIcon() {
  const isDark = document.documentElement.classList.contains('dark');
  const btn = document.getElementById('theme-toggle');
  btn.innerHTML = isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
}

init();
</script>
</body>
</html>
