<!DOCTYPE html>
<html lang="fr" dir="ltr" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"/>
  <meta name="theme-color" content="#1e272e" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)">
  <title>The Guys ‚Ä¢ Menu Digital</title>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #d63031;
      --primary-dark: #b71c1c;
      --light: #f8f9fa;
      --dark: #1e272e;
      --gray: #636e72;
      --success: #00b894;
      --danger: #ff7675;
      
      --bg-body: var(--light);
      --text-main: var(--dark);
      --bg-header: rgba(255, 255, 255, 0.95);
      --text-header: var(--dark);
      --bg-card: white;
      --text-card-title: var(--dark);
      --text-card-desc: #555;
      --bg-category-btn: #dfe6e9;
      --text-category-btn: var(--dark);
      
      --bg-cart: white;
      --text-cart: var(--dark);
      --bg-modal: white;
      --border-light: #eee;
      --border-dark: #2d3748;
      
      --bg-footer: #f1f2f6;
      --text-footer: var(--dark);

      --vh: 1vh; 
    }

    :root.dark {
      --primary: #e84118;
      --bg-body: #000000;
      --text-main: #f5f6fa;
      --bg-header: rgba(0, 0, 0, 0.85);
      --text-header: #ffffff;
      --bg-card: #121212;
      --text-card-title: #ffffff;
      --text-card-desc: #b2bec3;
      --bg-category-btn: #2d3436;
      --text-category-btn: #dfe6e9;
      --bg-cart: #090909;
      --text-cart: #f5f6fa;
      --bg-modal: #121212;
      --border-light: #2d3436;
      --border-dark: #636e72;
      --bg-footer: #0a0a0a;
      --text-footer: #b2bec3;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    html, body {
      width: 100%;
      overflow-x: hidden;
      overscroll-behavior-y: none;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg-body);
      color: var(--text-main);
      line-height: 1.5;
      transition: background 0.4s ease, color 0.4s ease;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      min-height: calc(var(--vh, 1vh) * 100);
      padding-left: env(safe-area-inset-left);
      padding-right: env(safe-area-inset-right);
      padding-bottom: env(safe-area-inset-bottom);
    }

    input, select, textarea {
      font-size: 16px;
    }

    [dir="rtl"] body {
      font-family: 'Tajawal', sans-serif;
    }

    /* HEADER */
    .header-modern {
      background: var(--bg-header);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      color: var(--text-header);
      padding: 0.8rem 1rem;
      padding-top: max(0.8rem, env(safe-area-inset-top));
      position: sticky;
      top: 0;
      z-index: 2000;
      border-bottom: 1px solid rgba(255,255,255,0.05);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.6rem;
    }

    .logo-container {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .logo {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--primary);
    }

    .brand-text h1 {
      font-size: 1.2rem;
      margin: 0;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      background: linear-gradient(45deg, #fff, #ccc);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .brand-text .slogan {
      font-size: 0.7rem;
      opacity: 0.7;
      margin: 0;
      font-weight: 300;
      letter-spacing: 1px;
    }

    .header-controls {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .lang-switch {
      display: flex;
      background: rgba(255,255,255,0.08);
      border-radius: 30px;
      padding: 2px;
    }

    .lang-btn {
      background: transparent;
      border: none;
      color: var(--text-header);
      padding: 0.3rem 0.6rem;
      border-radius: 20px;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.7rem;
      transition: all 0.3s;
    }

    .lang-btn.active {
      background: var(--primary);
      color: white;
    }

    .cart-btn,
    .theme-toggle-btn {
      position: relative;
      background: transparent;
      border: 1px solid rgba(255,255,255,0.1);
      color: var(--text-header);
      font-size: 1.1rem;
      cursor: pointer;
      width: 38px;
      height: 38px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.3s ease;
    }

    .cart-count {
      position: absolute;
      top: -5px;
      right: -5px;
      background: var(--primary);
      color: white;
      font-size: 0.65rem;
      font-weight: 700;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid var(--bg-header);
    }

    /* PROMO MARQUEE */
    .promo-marquee {
      background: linear-gradient(90deg, #d63031, #e17055);
      color: white;
      overflow: hidden;
      white-space: nowrap;
      height: 40px;
      line-height: 40px;
      font-size: 0.85rem;
      font-weight: 600;
      position: relative;
      z-index: 900;
    }

    .marquee-content {
      display: inline-block;
      padding-left: 100%;
      animation: marquee 40s linear infinite;
    }

    @keyframes marquee {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    /* HERO VIDEO */
    .promo-video-wrapper {
      position: relative;
      width: 94%;
      max-width: 1200px;
      margin: 1rem auto;
      border-radius: 20px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.1);
    }

    .promo-video-wrapper::before {
      content: "";
      display: block;
      padding-top: 50%;
    }

    .promo-video {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* CATEGORIES */
    .container {
      max-width: 1280px;
      margin: 0 auto;
      padding: 0 1rem;
      flex: 1;
    }

    .categories-wrapper {
      position: sticky;
      top: calc(65px + env(safe-area-inset-top));
      z-index: 800;
      background: var(--bg-body);
      padding: 0.8rem 0;
      margin-bottom: 1rem;
      overflow-x: auto;
      white-space: nowrap;
      scrollbar-width: none;
    }

    .categories-wrapper::-webkit-scrollbar {
      display: none;
    }

    .categories {
      display: inline-flex;
      gap: 0.6rem;
      padding: 0 1rem;
    }

    .category-btn {
      padding: 0.5rem 1.2rem;
      border-radius: 50px;
      border: 1px solid rgba(255,255,255,0.1);
      background: var(--bg-category-btn);
      color: var(--text-category-btn);
      cursor: pointer;
      font-weight: 600;
      font-size: 0.85rem;
      transition: all 0.3s;
      flex-shrink: 0;
    }

    .category-btn.active {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    /* MENU GRID & CARDS */
    .menu-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.2rem;
      padding-bottom: 2rem;
    }

    .menu-card {
      min-height: auto;
      background: var(--bg-card);
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.06);
      box-shadow: 0 3px 10px rgba(0,0,0,0.08);
      display: flex;
      flex-direction: column;
      overflow: visible;
      height: auto !important;
      transition: transform 0.18s ease;
    }

    .product-image-wrapper {
      width: 100%;
      aspect-ratio: 1 / 1;
      height: clamp(90px, 22vw, 130px);
      min-height: 90px;
      overflow: hidden;
      background: #111;
      position: relative;
    }

    .product-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .card-badge {
      position: absolute;
      top: 8px;
      left: 8px;
      background: rgba(0,0,0,0.75);
      backdrop-filter: blur(4px);
      color: white;
      font-size: 0.65rem;
      padding: 3px 8px;
      border-radius: 8px;
      font-weight: 700;
      z-index: 10;
    }

    .card-content {
      padding: 10px 12px 12px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      flex: none;
    }

    .card-title {
      font-size: 0.94rem;
      font-weight: 700;
      line-height: 1.24;
      color: var(--text-card-title);
    }

    .card-desc {
      font-size: 0.73rem;
      line-height: 1.36;
      color: var(--text-card-desc);
      flex: none;
      margin-bottom: 4px;
    }

    .card-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 4px;
      padding-top: 8px;
      border-top: 1px solid rgba(255,255,255,0.06);
    }

    .price {
      font-size: 0.98rem;
      font-weight: 800;
      color: var(--primary);
    }

    .add-btn {
      background: var(--text-main);
      color: var(--bg-body);
      border: none;
      padding: 6px 12px;
      border-radius: 8px;
      font-weight: 700;
      font-size: 0.78rem;
      cursor: pointer;
      min-width: 34px;
    }

    /* ============================================= */
    /*              AJOUTS RESPONSIVE                */
    /* ============================================= */

    /* Tr√®s petits √©crans (ex: iPhone SE, vieux Android ~320-360px) */
    @media (max-width: 360px) {
      .header-modern {
        padding: 0.6rem 0.8rem;
        gap: 0.4rem;
      }

      .logo {
        width: 38px;
        height: 38px;
      }

      .brand-text h1 {
        font-size: 1rem;
      }

      .brand-text .slogan {
        font-size: 0.6rem;
      }

      .lang-btn {
        padding: 0.25rem 0.5rem;
        font-size: 0.65rem;
      }

      .cart-btn, .theme-toggle-btn {
        width: 34px;
        height: 34px;
        font-size: 1rem;
      }

      .promo-marquee {
        height: 36px;
        line-height: 36px;
        font-size: 0.78rem;
      }

      .promo-video-wrapper {
        margin: 0.8rem auto;
        width: 96%;
      }

      .category-btn {
        padding: 0.4rem 1rem;
        font-size: 0.78rem;
      }

      .menu-grid {
        gap: 8px;
        padding: 0 8px 2rem;
      }

      .product-image-wrapper {
        height: clamp(80px, 24vw, 110px);
        min-height: 80px;
      }

      .card-title {
        font-size: 0.86rem;
        line-height: 1.22;
      }

      .card-desc {
        font-size: 0.68rem;
        line-height: 1.3;
      }

      .price {
        font-size: 0.92rem;
      }

      .add-btn {
        padding: 5px 10px;
        font-size: 0.72rem;
        min-width: 30px;
      }
    }

    /* Mobile standard (360‚Äì480px) ‚Äì 2 cartes par ligne */
    @media (max-width: 480px) {
      .menu-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        padding: 0 8px 2.5rem;
      }

      .product-image-wrapper {
        height: clamp(100px, 26vw, 120px);
        min-height: 100px;
      }

      .card-content {
        padding: 8px 10px 10px;
        gap: 5px;
      }

      .card-title {
        font-size: 0.88rem;
        line-height: 1.25;
      }

      .card-desc {
        font-size: 0.70rem;
        line-height: 1.32;
      }

      .price {
        font-size: 0.96rem;
      }

      .add-btn {
        padding: 5px 10px;
        font-size: 0.74rem;
      }

      .card-footer {
        margin-top: 2px;
        padding-top: 6px;
      }
    }

    /* Petits / moyens mobiles (480‚Äì600px) */
    @media (max-width: 600px) {
      .menu-grid {
        gap: 12px;
      }

      .product-image-wrapper {
        height: clamp(110px, 24vw, 135px);
      }

      .card-title {
        font-size: 0.92rem;
      }

      .card-desc {
        font-size: 0.72rem;
      }
    }

    /* Tablettes portrait et grands mobiles (600‚Äì850px) */
    @media (max-width: 850px) {
      .menu-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 1.1rem;
      }

      .product-image-wrapper {
        height: clamp(120px, 22vw, 150px);
      }

      .card-title {
        font-size: 0.96rem;
      }

      .price {
        font-size: 1rem;
      }
    }

    /* FOOTER */
    .main-footer {
      background: var(--bg-footer);
      color: var(--text-footer);
      padding: 3rem 1.5rem 2rem;
      margin-top: 2rem;
      text-align: center;
      border-top: 1px solid rgba(255,255,255,0.05);
      padding-bottom: max(2rem, env(safe-area-inset-bottom));
    }

    .footer-content {
      max-width: 600px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1.2rem;
    }

    .footer-logo {
      font-size: 1.5rem;
      font-weight: 900;
      color: var(--text-header);
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    .footer-desc {
      font-size: 0.95rem;
      line-height: 1.6;
      opacity: 0.8;
      max-width: 400px;
    }

    .social-btn {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
      color: white;
      text-decoration: none;
      padding: 0.8rem 1.8rem;
      border-radius: 50px;
      font-weight: 600;
      margin: 1rem 0;
      font-size: 1rem;
    }

    .copyright {
      font-size: 0.8rem;
      opacity: 0.5;
      margin-top: 1rem;
    }

    /* CART PANEL */
    .cart-panel {
      position: fixed;
      right: 0;
      top: 0;
      width: 400px;
      max-width: 100%;
      height: 100vh;
      height: calc(var(--vh, 1vh) * 100);
      background: var(--bg-cart);
      color: var(--text-cart);
      transform: translateX(100%);
      transition: transform 0.4s cubic-bezier(0.16,1,0.3,1);
      z-index: 3000;
      display: flex;
      flex-direction: column;
      border-left: 1px solid var(--border-light);
      padding-top: env(safe-area-inset-top);
      padding-bottom: env(safe-area-inset-bottom);
      padding-right: env(safe-area-inset-right);
    }

    .cart-panel.open {
      transform: translateX(0);
    }

    .cart-header { padding: 1.5rem; border-bottom: 1px solid var(--border-light); display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.02); }
    [dir="rtl"] .cart-header { flex-direction: row-reverse; }

    .cart-body { flex: 1; overflow-y: auto; padding: 1.5rem; overscroll-behavior: contain; }

    .cart-item { display: flex; gap: 1rem; padding-bottom: 1rem; margin-bottom: 1rem; border-bottom: 1px solid var(--border-light); position: relative; }
    [dir="rtl"] .cart-item { flex-direction: row-reverse; text-align: right; }

    .cart-item-img { width: 70px; height: 70px; object-fit: cover; border-radius: 10px; }
    .cart-item-info { flex: 1; }
    .cart-item-title { font-weight: 700; font-size: 0.95rem; color: var(--text-main); display: block; margin-bottom: 4px;}
    .cart-item-supps { font-size: 0.75rem; color: var(--gray); margin-bottom: 4px; }
    
    .remove-btn {
      position: absolute; top: 0; right: 0; background: none; border: none; color: var(--danger);
      font-size: 1.1rem; cursor: pointer; opacity: 0.7; transition: opacity 0.2s; padding: 5px;
    }
    [dir="rtl"] .remove-btn { right: auto; left: 0; }

    .cart-footer { padding: 1.5rem; background: var(--bg-card); border-top: 1px solid var(--border-light); }
    .cart-total-row { display: flex; justify-content: space-between; font-size: 1.2rem; font-weight: 800; margin-bottom: 1.2rem; }
    [dir="rtl"] .cart-total-row { flex-direction: row-reverse; }

    .mode-switch { background: var(--bg-category-btn); padding: 4px; border-radius: 12px; display: flex; margin-bottom: 1.2rem; }
    .mode-option { flex: 1; text-align: center; padding: 0.8rem; cursor: pointer; border-radius: 10px; font-weight: 600; font-size: 0.9rem; transition: all 0.3s; color: var(--text-card-desc); }
    .mode-option.active { background: var(--bg-card); color: var(--primary); }

    .order-btn {
      width: 100%; padding: 1rem; background: var(--success); color: white; border: none;
      border-radius: 12px; font-size: 1.1rem; font-weight: 700; cursor: pointer;
      display: flex; align-items: center; justify-content: center; gap: 10px;
      transition: background 0.3s; touch-action: manipulation;
    }

    /* MODALS */
    .modal {
      display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 5000;
      align-items: center; justify-content: center; backdrop-filter: blur(8px);
      height: 100%; height: calc(var(--vh, 1vh) * 100);
    }
    .modal.active { display: flex; animation: fadeIn 0.3s ease; }

    .modal-content {
      background: var(--bg-modal); color: var(--text-main); border-radius: 20px;
      width: 92%; max-width: 500px; max-height: 90vh; overflow-y: auto; 
      border: 1px solid var(--border-dark); display: flex; flex-direction: column;
      box-shadow: 0 20px 50px rgba(0,0,0,0.5);
    }

    .modal-header { padding: 1.2rem; border-bottom: 1px solid var(--border-light); display: flex; justify-content: space-between; align-items: center; }
    .modal-title { margin: 0; font-size: 1.2rem; font-weight: 700; }
    .modal-close { background: none; border: none; font-size: 1.8rem; cursor: pointer; color: var(--gray); padding: 5px; }
    .modal-body { padding: 1.2rem; flex: 1; overflow-y: auto; overscroll-behavior: contain; }

    .supplement-row { display: flex; justify-content: space-between; align-items: center; padding: 0.8rem 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
    [dir="rtl"] .supplement-row { flex-direction: row-reverse; }

    .qty-control { display: flex; align-items: center; gap: 10px; background: var(--bg-category-btn); padding: 4px 8px; border-radius: 30px; }
    .qty-btn { width: 28px; height: 28px; border-radius: 50%; border:none; background: var(--bg-card); color: var(--text-main); cursor: pointer; font-weight: bold; touch-action: manipulation; }
    .qty-val { width: 20px; text-align: center; font-weight: 600; font-size: 0.9rem; }

    .modal-footer { padding: 1.2rem; border-top: 1px solid var(--border-light); padding-bottom: max(1.2rem, env(safe-area-inset-bottom)); }
    .confirm-btn {
      width: 100%; padding: 1rem; background: var(--primary); color: white; border: none;
      border-radius: 12px; font-weight: 700; font-size: 1rem; cursor: pointer;
      display: flex; justify-content: space-between; touch-action: manipulation;
    }

    #success-message {
      position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px);
      background: var(--success); color: white; padding: 0.8rem 1.5rem; border-radius: 50px; 
      z-index: 6000; font-weight: 600; opacity: 0; transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      bottom: max(30px, calc(env(safe-area-inset-bottom) + 10px));
      font-size: 0.9rem;
      white-space: nowrap;
    }
    #success-message.show { transform: translateX(-50%) translateY(0); opacity: 1; }
    @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
    
    .table-input {
      width: 100%; padding: 0.8rem; margin-bottom: 1rem; background: var(--bg-category-btn);
      border: 2px solid transparent; border-radius: 10px; color: var(--text-main); font-size: 16px;
    }
    .table-input:focus { border-color: var(--primary); outline: none; }

  </style>
</head>
<body>

<header class="header-modern">
  <div class="logo-container">
    <img src="image/logo.jpeg" alt="Logo" class="logo">
    <div class="brand-text">
      <h1 id="brand-title">GOOD GUYS</h1>
      <p class="slogan" id="brand-slogan">Premium Street Food</p>
    </div>
  </div>

  <div class="header-controls">
    <div class="lang-switch">
      <button class="lang-btn active" onclick="setLang('fr')">FR</button>
      <button class="lang-btn" onclick="setLang('en')">EN</button>
      <button class="lang-btn" onclick="setLang('ar')">ÿπÿ±ÿ®Ÿä</button>
    </div>
    
    <button class="cart-btn" id="cart-toggle">
      <i class="fas fa-shopping-bag"></i>
      <span class="cart-count" id="cart-count">0</span>
    </button>

    <button class="theme-toggle-btn" id="theme-toggle">
      <i class="fas fa-sun"></i> </button>
  </div>
</header>

<div class="promo-marquee">
  <div class="marquee-content">
    <span>üî• <strong id="promo-1">NOUVEAU</strong> : Deep Dish Pizza Chicago Style !</span>
    <span>üçî <strong>Two Guys Burger</strong> : Le best-seller du chef !</span>
    <span>üåÆ <strong>Tacos Gratin√©s</strong> : +3.0 DT seulement !</span>
    <span>üçü <strong>Poutine</strong> : L'authentique recette qu√©b√©coise !</span>
  </div>
</div>

<div class="promo-video-wrapper">
  <video class="promo-video" autoplay loop muted playsinline poster="https://images.unsplash.com/photo-1561758033-d8f19662cb24?w=1200">
    <source src="video/good guys.mp4" type="video/mp4">
  </video>
  <div style="position:absolute; inset:0; background:linear-gradient(to top, var(--bg-body), transparent 30%);"></div>
</div>

<div class="container">
  <div class="categories-wrapper">
    <div class="categories" id="categories"></div>
  </div>
  <div class="menu-grid" id="menu-grid"></div>
</div>

<footer class="main-footer">
  <div class="footer-content">
    <div class="footer-logo">THE GUYS</div>
    <p class="footer-desc">
      D√©couvrez l'authenticit√© du Street Food revisit√©. Des ingr√©dients frais, des sauces maison et une passion pour le go√ªt unique.
    </p>
    <a href="https://instagram.com/theguys_tn" target="_blank" class="social-btn">
      <i class="fab fa-instagram"></i> Suivez-nous sur Instagram
    </a>
    <div class="copyright">¬© 2026 THE GUYS. All rights reserved.</div>
  </div>
</footer>

<div class="cart-panel" id="cart-panel">
  <div class="cart-header">
    <h3 id="cart-title">Votre Panier</h3>
    <button class="modal-close" id="cart-close">√ó</button>
  </div>
  
  <div class="cart-body" id="cart-items">
    </div>
  
  <div class="cart-footer">
    <div class="mode-switch">
      <div class="mode-option active" data-mode="surplace" onclick="setOrderMode('surplace')">Sur Place</div>
      <div class="mode-option" data-mode="emporter" onclick="setOrderMode('emporter')">√Ä Emporter</div>
    </div>

    <div id="table-wrapper">
      <input type="number" id="table-number" class="table-input" placeholder="Num√©ro de table (Ex: 12)">
    </div>

    <div class="cart-total-row">
      <span>Total</span>
      <span id="cart-total">0.00 DT</span>
    </div>

    <button class="order-btn" id="confirm-order">
      <i class="fab fa-whatsapp"></i> <span id="btn-order-text">Commander</span>
    </button>
  </div>
</div>

<div class="modal" id="supplements-modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 class="modal-title" id="modal-product-name">Options</h3>
      <button class="modal-close" onclick="closeModal()">√ó</button>
    </div>
    <div class="modal-body" id="supplements-list"></div>
    <div class="modal-footer">
      <button class="confirm-btn" onclick="addToCartConfirm()">
        <span id="btn-add-text">Ajouter</span>
        <span id="modal-total-price"></span>
      </button>
    </div>
  </div>
</div>

<div id="success-message">Commande ajout√©e ! üòã</div>

<script>
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// SYSTEME VIEWPORT / MOBILE FIX
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function setViewportHeight() {
    let vh = window.innerHeight * 0.01;
    document.documentElement.style.setProperty('--vh', `${vh}px`);
}
setViewportHeight();
window.addEventListener('resize', setViewportHeight);
window.addEventListener('orientationchange', () => setTimeout(setViewportHeight, 100));

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// DONN√âES DU MENU
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const products = [
  // --- SANDWICHES ---
  { id: "s1", cat: "Sandwiches", price: 9.9, img: "image/sandwish Escalope.jpg", name: {fr:"Classic", en:"Classic", ar:"ŸÉŸÑÿßÿ≥ŸäŸÉ"}, desc: {fr:"Pain au choix, escalope marin√©e, salade, sauce", ar:"ÿÆÿ®ÿ≤ ÿ≠ÿ≥ÿ® ÿßŸÑÿßÿÆÿ™Ÿäÿßÿ±ÿå ÿßÿ≥ŸÉÿßŸÑŸàÿ® ŸÖÿ™ÿ®ŸÑÿå ÿ≥ŸÑÿ∑ÿ©ÿå ÿµŸàÿµ"} },
  { id: "s2", cat: "Sandwiches", price: 9.9, img: "image/sandwich tikka.jpg", name: {fr:"Tikka", en:"Tikka", ar:"ÿ™ŸäŸÉÿß"}, desc: {fr:"Saveurs indiennes, √©pices tikka", ar:"ŸÜŸÉŸáÿßÿ™ ŸáŸÜÿØŸäÿ©ÿå ÿ®Ÿáÿßÿ±ÿßÿ™ ÿ™ŸäŸÉÿß"} },
  { id: "s3", cat: "Sandwiches", price: 13.9, img: "image/sandwitsh sp√©cial.jpg", name: {fr:"Buffalo", en:"Buffalo", ar:"ÿ®ÿßŸÅÿßŸÑŸà"}, desc: {fr:"Sauce buffalo √©pic√©e, fromage fondant", ar:"ÿµŸàÿµ ÿ®ÿßŸÅÿßŸÑŸà ÿ≠ÿßÿ±ÿ©ÿå ÿ¨ÿ®ŸÜ ÿ∞ÿßÿ¶ÿ®"} },
  { id: "s4", cat: "Sandwiches", price: 13.9, img: "image/sandwis gringo.jpg", name: {fr:"Gringo", en:"Gringo", ar:"ÿ∫ÿ±ŸäŸÜÿ∫Ÿà"}, desc: {fr:"Style mexicain, piments doux, ma√Øs", ar:"ÿ≥ÿ™ÿßŸäŸÑ ŸÖŸÉÿ≥ŸäŸÉŸäÿå ŸÅŸÑŸÅŸÑ ÿ≠ŸÑŸàÿå ÿ∞ÿ±ÿ©"} },
  { id: "s5", cat: "Sandwiches", price: 11.9, img: "image/sandwish Mahbouli escalope.jpg", name: {fr:"Farmer", en:"Farmer", ar:"ŸÅÿßÿ±ŸÖÿ±"}, desc: {fr:"Poulet, ≈ìuf, fromage, sauce ranch", ar:"ÿØÿ¨ÿßÿ¨ÿå ÿ®Ÿäÿ∂ÿå ÿ¨ÿ®ŸÜÿå ÿµŸàÿµ ÿ±ÿßŸÜÿ¥"} },
  { id: "s6", cat: "Sandwiches", price: 11.9, img: "image/sandwitsh sp√©cial.jpg", name: {fr:"Crunchy", en:"Crunchy", ar:"ŸÉÿ±ÿßŸÜÿ¥Ÿä"}, desc: {fr:"Poulet croustillant, cheddar", ar:"ÿØÿ¨ÿßÿ¨ ŸÖŸÇÿ±ŸÖÿ¥ÿå ÿ¥ŸäÿØÿ±"} },
  { id: "s7", cat: "Sandwiches", price: 11.9, img: "image/sandwochs Chawarma.jpg", name: {fr:"Philly‚Äôs", en:"Philly‚Äôs", ar:"ŸÅŸäŸÑŸä"}, desc: {fr:"Steak √©minc√©, oignons caram√©lis√©s, fromage", ar:"ÿ≥ÿ™ŸäŸÉ ŸÖŸÅÿ±ŸàŸÖÿå ÿ®ÿµŸÑ ŸÖŸÉÿ±ŸÖŸÑÿå ÿ¨ÿ®ŸÜ"} },
  { id: "s8", cat: "Sandwiches", price: 16.9, img: "image/sandwich thon.jpg", name: {fr:"Viking", en:"Viking", ar:"ŸÅÿßŸäŸÉŸäŸÜÿ∫"}, desc: {fr:"Double portion viande, bacon, fromage fum√©", ar:"Ÿàÿ¨ÿ®ÿ© ŸÖÿ∂ÿßÿπŸÅÿ© ŸÑÿ≠ŸÖÿå ÿ®ÿßŸÉŸàŸÜÿå ÿ¨ÿ®ŸÜ ŸÖÿØÿÆŸÜ"} },
  // --- BURGERS ---
  { id: "b1", cat: "Burgers", price: 12.9, img: "https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=600", name: {fr:"One Guy", en:"One Guy", ar:"ŸàÿßŸÜ ÿ∫ÿßŸä"}, desc: {fr:"B≈ìuf pur, cheddar, laitue, sauce maison", ar:"ŸÑÿ≠ŸÖ ÿ®ŸÇÿ±Ÿä ÿµÿßŸÅŸäÿå ÿ¥ŸäÿØÿ±ÿå ÿÆÿ≥ÿå ÿµŸàÿµ ŸÖŸÜÿ≤ŸÑŸä"} },
  { id: "b2", cat: "Burgers", price: 15.9, img: "https://images.unsplash.com/photo-1594212699903-ec8a3eca50f5?w=600", name: {fr:"Two Guys", en:"Two Guys", ar:"ÿ™Ÿà ÿ∫ÿßŸäÿ≤"}, desc: {fr:"Double steak, double cheddar", ar:"ÿØŸàÿ®ŸÑ ÿ≥ÿ™ŸäŸÉÿå ÿØŸàÿ®ŸÑ ÿ¥ŸäÿØÿ±"} },
  { id: "b3", cat: "Burgers", price: 14.9, img: "https://images.unsplash.com/photo-1550547660-d9450f859349?w=600", name: {fr:"Wild Guy", en:"Wild Guy", ar:"ŸàÿßŸäŸÑÿØ ÿ∫ÿßŸä"}, desc: {fr:"Sauce BBQ fum√©e, oignons rings", ar:"ÿµŸàÿµ ÿ®ÿßÿ±ÿ®ŸäŸÉŸäŸà ŸÖÿØÿÆŸÜÿå ÿ≠ŸÑŸÇÿßÿ™ ÿ®ÿµŸÑ"} },
  { id: "b4", cat: "Burgers", price: 15.9, img: "https://images.unsplash.com/photo-1596662951482-0c4ba74a6df6?w=600", name: {fr:"Crazy Egg", en:"Crazy Egg", ar:"ŸÉÿ±Ÿäÿ≤Ÿä ÿ•Ÿäÿ∫"}, desc: {fr:"Steak, ≈ìuf au plat, bacon", ar:"ÿ≥ÿ™ŸäŸÉÿå ÿ®Ÿäÿ∂ÿ© ŸÖŸÇŸÑŸäÿ©ÿå ÿ®ÿßŸÉŸàŸÜ"} },
  { id: "b5", cat: "Burgers", price: 16.9, img: "image/Chiken Burgers.jpg", name: {fr:"Supr√™me", en:"Supr√™me", ar:"ÿ≥Ÿàÿ®ÿ±ŸäŸÖ"}, desc: {fr:"Recette premium chef special", ar:"ŸàÿµŸÅÿ© ÿßŸÑÿ¥ŸäŸÅ ÿßŸÑÿÆÿßÿµÿ©"} },
  { id: "b6", cat: "Burgers", price: 11.9, img: "image/Beef burgers.jpg", name: {fr:"Crispy", en:"Crispy", ar:"ŸÉÿ±Ÿäÿ≥ÿ®Ÿä"}, desc: {fr:"Poulet pan√© croustillant", ar:"ÿØÿ¨ÿßÿ¨ ÿ®ÿßŸÜŸäŸá ŸÖŸÇÿ±ŸÖÿ¥"} },
  { id: "b7", cat: "Burgers", price: 16.9, img: "https://images.unsplash.com/photo-1607013251379-e6eecfffe234?w=600", name: {fr:"Superb", en:"Superb", ar:"ÿ≥Ÿàÿ®ÿ±ÿ®"}, desc: {fr:"Champignons saut√©s, sauce suisse", ar:"ŸÅÿ∑ÿ± ÿ≥Ÿàÿ™ŸäŸáÿå ÿµŸàÿµ ÿ≥ŸàŸäÿ≥ÿ±Ÿä"} },
  { id: "b8", cat: "Burgers", price: 16.9, img: "image/hamberger.jpg", name: {fr:"Tartufo", en:"Tartufo", ar:"ÿ™ÿßÿ±ÿ™ŸàŸÅŸà"}, desc: {fr:"Cr√®me de truffe, parmesan", ar:"ŸÉÿ±ŸäŸÖÿ© ÿßŸÑŸÉŸÖÿ£ÿ©ÿå ÿ®ÿßÿ±ŸÖŸäÿ≤ÿßŸÜ"} },
  { id: "b9", cat: "Burgers", price: 16.9, img: "https://images.unsplash.com/photo-1551782450-a2132b4ba21d?w=600", name: {fr:"Extr√™me", en:"Extr√™me", ar:"ÿ•ŸÉÿ≥ÿ™ÿ±ŸäŸÖ"}, desc: {fr:"Piquant, Jalape√±os, Sauce forte", ar:"ÿ≠ÿßÿ±ÿå ŸáÿßŸÑÿ®ŸäŸÜŸàÿå ÿµŸàÿµ ÿ≠ÿßÿ±"} },
  // --- TACOS ---
  { id: "t1", cat: "Tacos", price: 11.9, img: "image/tacos chawarma.jpg", name: {fr:"Frenchy", en:"Frenchy", ar:"ŸÅÿ±ŸäŸÜÿ¥Ÿä"}, desc: {fr:"Cordon bleu, sauce fromag√®re", ar:"ŸÉŸàÿ±ÿØŸàŸÜ ÿ®ŸÑŸàÿå ÿµŸàÿµ ÿ¨ÿ®ŸÜ"} },
  { id: "t2", cat: "Tacos", price: 11.9, img: "image/tacos poulet.jpg", name: {fr:"Crousti", en:"Crousti", ar:"ŸÉÿ±Ÿàÿ≥ÿ™Ÿä"}, desc: {fr:"Nuggets, frites, cheddar", ar:"ŸÜÿßÿ∫ÿ™ÿ≥ÿå ÿ®ÿ∑ÿßÿ∑ÿßÿå ÿ¥ŸäÿØÿ±"} },
  { id: "t3", cat: "Tacos", price: 11.9, img: "image/Tackos.jpg", name: {fr:"Spicy Guy", en:"Spicy Guy", ar:"ÿ≥ÿ®ÿßŸäÿ≥Ÿä ÿ∫ÿßŸä"}, desc: {fr:"Viande hach√©e √©pic√©e, harissa mayo", ar:"ŸÑÿ≠ŸÖ ŸÖŸÅÿ±ŸàŸÖ ÿ≠ÿßÿ±ÿå Ÿáÿ±Ÿäÿ≥ÿ© ŸÖÿßŸäŸà"} },
  { id: "t4", cat: "Tacos", price: 11.9, img: "https://images.unsplash.com/photo-1552332386-f8dd00dc2f85?w=600", name: {fr:"Lyonnais", en:"Lyonnais", ar:"ŸÑŸäŸàŸÜŸä"}, desc: {fr:"Sauce gruy√®re, escalope", ar:"ÿµŸàÿµ ÿ∫ÿ±ŸàŸäŸäÿ±ÿå ÿßÿ≥ŸÉÿßŸÑŸàÿ®"} },
  { id: "t5", cat: "Tacos", price: 15.9, img: "https://images.unsplash.com/photo-1504544750208-dc0358e63f7f?w=600", name: {fr:"Tasty", en:"Tasty", ar:"ÿ™Ÿäÿ≥ÿ™Ÿä"}, desc: {fr:"M√©lange viandes, sauce alg√©rienne", ar:"ÿÆŸÑŸäÿ∑ ŸÑÿ≠ŸàŸÖÿå ÿµŸàÿµ ÿ¨ÿ≤ÿßÿ¶ÿ±Ÿäÿ©"} },
  { id: "t6", cat: "Tacos", price: 16.9, img: "https://images.unsplash.com/photo-1615870216519-2f9fa575fa5c?w=600", name: {fr:"Cheesy", en:"Cheesy", ar:"ÿ™ÿ¥Ÿäÿ≤Ÿä"}, desc: {fr:"Explosion de fromages", ar:"ÿßŸÜŸÅÿ¨ÿßÿ± ÿ£ÿ¨ÿ®ÿßŸÜ"} },
  { id: "t7", cat: "Tacos", price: 16.9, img: "https://images.unsplash.com/photo-1551504734-5ee1c4a1479b?w=600", name: {fr:"L‚ÄôItalo", en:"L‚ÄôItalo", ar:"ÿ•Ÿäÿ™ÿßŸÑŸà"}, desc: {fr:"Mozzarella, pesto, tomates s√©ch√©es", ar:"ŸÖŸàÿ≤ÿßÿ±ŸäŸÑÿßÿå ÿ®Ÿäÿ≥ÿ™Ÿàÿå ÿ∑ŸÖÿßÿ∑ŸÖ ŸÖÿ¨ŸÅŸÅÿ©"} },
  // --- TENDERS ---
  { id: "tn1", cat: "Tenders Box", price: 11.9, img: "image/3 Tenders.jpg", name: {fr:"3 Tenders", en:"3 Tenders", ar:"Ÿ£ ÿ™ŸÜÿØÿ±ÿ≤"}, desc: {fr:"3 pi√®ces pan√©es maison + sauce", ar:"Ÿ£ ŸÇÿ∑ÿπ ÿØÿ¨ÿßÿ¨ ŸÖŸÇÿ±ŸÖÿ¥ + ÿµŸàÿµ"} },
  { id: "tn2", cat: "Tenders Box", price: 21.9, img: "image/6 Tenders.jpg", name: {fr:"6 Tenders", en:"6 Tenders", ar:"Ÿ¶ ÿ™ŸÜÿØÿ±ÿ≤"}, desc: {fr:"6 pi√®ces pan√©es maison + 2 sauces", ar:"Ÿ¶ ŸÇÿ∑ÿπ ÿØÿ¨ÿßÿ¨ ŸÖŸÇÿ±ŸÖÿ¥ + Ÿ¢ ÿµŸàÿµ"} },
  // --- FRIES & POUTINE ---
  { id: "fp1", cat: "Fries & Poutine", price: 18.9, img: "image/Poutine 1.jpg", name: {fr:"Poutine 1", en:"Poutine 1", ar:"ÿ®Ÿàÿ™ŸäŸÜ Ÿ°"}, desc: {fr:"Frites, fromage en grains, sauce brune", ar:"ÿ®ÿ∑ÿßÿ∑ÿßÿå ÿ¨ÿ®ŸÜÿå ÿµŸàÿµ ÿ®ŸÜŸä"} },
  { id: "fp2", cat: "Fries & Poutine", price: 24.9, img: "image/Poutine 2.jpg", name: {fr:"Poutine 2", en:"Poutine 2", ar:"ÿ®Ÿàÿ™ŸäŸÜ Ÿ¢"}, desc: {fr:"Version XL avec viande hach√©e", ar:"ÿ≠ÿ¨ŸÖ ŸÉÿ®Ÿäÿ± ŸÖÿπ ŸÑÿ≠ŸÖ ŸÖŸÅÿ±ŸàŸÖ"} },
  // --- BOWLS ---
  { id: "bw1", cat: "Bowls", price: 14.9, img: "image/Pasta Chicky's.jpg", name: {fr:"Pasta Chicky's", en:"Pasta Chicky's", ar:"ÿ®ÿßÿ≥ÿ™ÿß ÿ™ÿ¥ŸäŸÉŸäÿ≤"}, desc: {fr:"P√¢tes cr√©meuses au poulet", ar:"ŸÖÿπŸÉÿ±ŸàŸÜÿ© ÿ®ÿßŸÑŸÉÿ±ŸäŸÖÿ© ŸàÿßŸÑÿØÿ¨ÿßÿ¨"} },
  { id: "bw2", cat: "Bowls", price: 15.9, img: "https://images.unsplash.com/photo-1555949258-eb67b1ef0ceb?w=600", name: {fr:"Pasta 5th Avenue", en:"Pasta 5th Avenue", ar:"ÿ®ÿßÿ≥ÿ™ÿß ŸÅŸäŸÅÿ™ ÿ£ŸÅŸäŸÜŸäŸà"}, desc: {fr:"Sauce ros√©e, champignons", ar:"ÿµŸàÿµ Ÿàÿ±ÿØŸäÿå ŸÅÿ∑ÿ±"} },
  { id: "bw3", cat: "Bowls", price: 13.9, img: "https://images.unsplash.com/photo-1612927601601-6638404737ce?w=600", name: {fr:"Rice Jiggy", en:"Rice Jiggy", ar:"ÿ£ÿ±ÿ≤ ÿ¨Ÿäÿ∫Ÿä"}, desc: {fr:"Riz √©pic√©, l√©gumes saut√©s", ar:"ÿ£ÿ±ÿ≤ ŸÖÿ®Ÿáÿ±ÿå ÿÆÿ∂ÿßÿ± ÿ≥Ÿàÿ™ŸäŸá"} },
  { id: "bw4", cat: "Bowls", price: 16.9, img: "https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=600", name: {fr:"Salad Rustic", en:"Salad Rustic", ar:"ÿ≥ŸÑÿ∑ÿ© ÿ±Ÿàÿ≥ÿ™ŸäŸÉ"}, desc: {fr:"M√©lange vert, noix, fromage bleu", ar:"ÿÆÿ∂ÿ±Ÿàÿßÿ™ÿå ÿ¨Ÿàÿ≤ÿå ÿ¨ÿ®ŸÜ ÿ£ÿ≤ÿ±ŸÇ"} },
  // --- GRILL CHICKEN ---
  { id: "gr1", cat: "Grill Chicken", price: 12.0, img: "image/Cuisse.jpg", name: {fr:"Cuisse", en:"Leg", ar:"ŸÅÿÆÿ∞ ÿØÿ¨ÿßÿ¨"}, desc: {fr:"Grill√© √† la flamme (12h-18h)", ar:"ŸÖÿ¥ŸàŸä ÿπŸÑŸâ ÿßŸÑŸÑŸáÿ® (Ÿ°Ÿ¢-Ÿ°Ÿ®)"} },
  { id: "gr2", cat: "Grill Chicken", price: 22.0, img: "image/Demi-poulet.jpg", name: {fr:"Demi-poulet", en:"Half Chicken", ar:"ŸÜÿµŸÅ ÿØÿ¨ÿßÿ¨ÿ©"}, desc: {fr:"Marin√© et grill√© + garniture", ar:"ŸÖÿ™ÿ®ŸÑ ŸàŸÖÿ¥ŸàŸä + ŸÖŸÇÿ®ŸÑÿßÿ™"} },
  { id: "gr3", cat: "Grill Chicken", price: 40.0, img: "https://images.unsplash.com/photo-1532550907401-a500c9a57435?w=600", name: {fr:"Poulet Entier", en:"Whole Chicken", ar:"ÿØÿ¨ÿßÿ¨ÿ© ŸÉÿßŸÖŸÑÿ©"}, desc: {fr:"Parfait pour partager", ar:"ŸÖÿ´ÿßŸÑŸä ŸÑŸÑŸÖÿ¥ÿßÿ±ŸÉÿ©"} },
  // --- PARTY BOX ---
  { id: "pb1", cat: "Party Box", price: 59.9, img: "image/Mix burgers & tacos pour 3-4.jpg", name: {fr:"Combo Friends", en:"Combo Friends", ar:"ŸÉŸàŸÖÿ®Ÿà ÿßŸÑÿ£ÿµÿØŸÇÿßÿ°"}, desc: {fr:"Mix burgers & tacos pour 3-4", ar:"ŸÖŸäŸÉÿ≥ ÿ®ÿ±ÿ∫ÿ± Ÿàÿ™ÿßŸÉŸàÿ≥ ŸÑŸÄ Ÿ£-Ÿ§ ÿ£ÿ¥ÿÆÿßÿµ"} },
  { id: "pb2", cat: "Party Box", price: 79.9, img: "image/Combo Family.jpg", name: {fr:"Combo Family", en:"Combo Family", ar:"ŸÉŸàŸÖÿ®Ÿà ÿßŸÑÿπÿßÿ¶ŸÑÿ©"}, desc: {fr:"Le festin familial ultime", ar:"ŸàŸÑŸäŸÖÿ© ÿπÿßÿ¶ŸÑŸäÿ© ŸÖÿ™ŸÉÿßŸÖŸÑÿ©"} },
  { id: "pb3", cat: "Party Box", price: 99.9, img: "image/Combo guys.jpg", name: {fr:"Combo Guys", en:"Combo Guys", ar:"ŸÉŸàŸÖÿ®Ÿà ÿ∫ÿßŸäÿ≤"}, desc: {fr:"L'exp√©rience compl√®te The Guys", ar:"ÿ™ÿ¨ÿ±ÿ®ÿ© ÿ∞ÿß ÿ∫ÿßŸäÿ≤ ÿßŸÑŸÉÿßŸÖŸÑÿ©"} },
  // --- DEEP DISH PIZZA ---
  { id: "dd1", cat: "Deep Dish Pizza", price: 24.9, img: "https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=600", name: {fr:"Chicago", en:"Chicago", ar:"ÿ¥ŸäŸÉÿßÿ∫Ÿà"}, desc: {fr:"P√¢te √©paisse, extra fromage, pepperoni", ar:"ÿπÿ¨ŸäŸÜÿ© ÿ≥ŸÖŸäŸÉÿ©ÿå ÿ¨ÿ®ŸÜ ÿ•ÿ∂ÿßŸÅŸäÿå ÿ®Ÿäÿ®Ÿäÿ±ŸàŸÜŸä"} },
  { id: "dd2", cat: "Deep Dish Pizza", price: 24.9, img: "https://images.unsplash.com/photo-1574071318508-1cdbab80d002?w=600", name: {fr:"Riccardo", en:"Riccardo", ar:"ÿ±ŸäŸÉÿßÿ±ÿØŸà"}, desc: {fr:"Sauce tomate, basilic, mozzarella", ar:"ÿµŸÑÿµÿ© ÿ∑ŸÖÿßÿ∑ŸÖÿå ÿ±Ÿäÿ≠ÿßŸÜÿå ŸÖŸàÿ≤ÿßÿ±ŸäŸÑÿß"} },
  { id: "dd3", cat: "Deep Dish Pizza", price: 24.9, img: "image/pizza 4 fromage.jpg", name: {fr:"Crispy Guys", en:"Crispy Guys", ar:"ŸÉÿ±Ÿäÿ≥ÿ®Ÿä ÿ∫ÿßŸäÿ≤"}, desc: {fr:"Poulet crispy, sauce blanche", ar:"ÿØÿ¨ÿßÿ¨ ŸÉÿ±Ÿäÿ≥ÿ®Ÿäÿå ÿµŸàÿµ ÿ£ÿ®Ÿäÿ∂"} },
  { id: "dd4", cat: "Deep Dish Pizza", price: 29.9, img: "https://images.unsplash.com/photo-1604382355076-af4b0eb60143?w=600", name: {fr:"Ricky", en:"Ricky", ar:"ÿ±ŸäŸÉŸä"}, desc: {fr:"Sp√©cialit√© du chef, bords fourr√©s", ar:"ÿ™ÿÆÿµÿµ ÿßŸÑÿ¥ŸäŸÅÿå ÿ£ÿ∑ÿ±ÿßŸÅ ŸÖÿ≠ÿ¥Ÿàÿ©"} },
  // --- BOISSONS ---
  { id: "dr1", cat: "Boissons", price: 2.0, img: "image/Eau 0.5 L.jpg", name: {fr:"Eau Min√©rale", en:"Water", ar:"ŸÖÿßÿ° ŸÖÿπÿØŸÜŸä"}, desc: {fr:"0.5L", ar:"Ÿ†.Ÿ• ŸÑÿ™ÿ±"} },
  { id: "dr2", cat: "Boissons", price: 3.5, img: "https://images.unsplash.com/photo-1622483767028-3f66f32aef97?w=600", name: {fr:"Canette", en:"Soda Can", ar:"ŸÖÿ¥ÿ±Ÿàÿ® ÿ∫ÿßÿ≤Ÿä"}, desc: {fr:"Coca, Fanta, Boga...", ar:"ŸÉŸàŸÉÿßÿå ŸÅÿßŸÜÿ™ÿßÿå ÿ®ŸàŸÇÿß..."} },
  { id: "dr3", cat: "Boissons", price: 4.5, img: "https://images.unsplash.com/photo-1513558161293-cdaf765ed2fd?w=600", name: {fr:"Citronnade", en:"Lemonade", ar:"ÿπÿµŸäÿ± ŸÑŸäŸÖŸàŸÜ"}, desc: {fr:"Frais maison", ar:"ÿ∑ÿßÿ≤ÿ¨ ŸÖŸÜÿ≤ŸÑŸä"} }
];

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// LOGIQUE
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const commonSupplements = [ { id: "menu_opt", name: {fr:"Menu (Frites + Boisson)", en:"Meal Deal (Fries+Drink)", ar:"Ÿàÿ¨ÿ®ÿ© (ÿ®ÿ∑ÿßÿ∑ÿß + ŸÖÿ¥ÿ±Ÿàÿ®)"}, price: 4.0 } ];
const tacoSupplements = [ { id: "gratine", name: {fr:"Gratin√© / Farci", en:"Gratin/Stuffed", ar:"ÿ∫ÿ±ÿßÿ™ÿßŸÜ / ŸÖÿ≠ÿ¥Ÿä"}, price: 3.0 }, ...commonSupplements ];

const translations = {
  fr: { cartTitle: "Votre Panier", order: "Commander sur WhatsApp", total: "Total", add: "Ajouter", surplace: "Sur Place", emporter: "√Ä Emporter", placeholder: "Num√©ro de table (Ex: 12)", added: "Ajout√© au panier ! üòã" },
  en: { cartTitle: "Your Cart", order: "Order via WhatsApp", total: "Total", add: "Add", surplace: "Eat In", emporter: "Takeaway", placeholder: "Table Number (Ex: 12)", added: "Added to cart! üòã" },
  ar: { cartTitle: "ÿ≥ŸÑÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™", order: "ÿßÿ∑ŸÑÿ® ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®", total: "ÿßŸÑŸÖÿ¨ŸÖŸàÿπ", add: "ÿ£ÿ∂ŸÅ", surplace: "ŸÅŸä ÿßŸÑŸÖÿ≠ŸÑ", emporter: "ÿ≥ŸÅÿ±Ÿä", placeholder: "ÿ±ŸÇŸÖ ÿßŸÑÿ∑ÿßŸàŸÑÿ© (ŸÖÿ´ÿßŸÑ: Ÿ°Ÿ¢)", added: "ÿ™ŸÖÿ™ ÿßŸÑÿ•ÿ∂ÿßŸÅÿ© ŸÑŸÑÿ≥ŸÑÿ©! üòã" }
};

let cart = [];
let currentLang = 'fr';
let orderMode = 'surplace';
let currentProduct = null;
let currentSupplements = [];
let WHATSAPP_NUMBER = "21658052184";

function init() {
  renderCategories();
  renderMenu('all');
  updateTexts();
  if(!localStorage.getItem('theme')) document.documentElement.classList.add('dark');
  else {
    if(localStorage.getItem('theme') === 'dark') document.documentElement.classList.add('dark');
    else document.documentElement.classList.remove('dark');
  }
  updateThemeIcon();
  attachAddButtonListeners(); // Nouvelle fonction pour attacher les listeners
}

function renderCategories() {
  const cats = [...new Set(products.map(p => p.cat))];
  const container = document.getElementById('categories');
  container.innerHTML = '';

  const allText = currentLang === 'ar' ? 'ÿßŸÑŸÉŸÑ' : 'All';
  container.innerHTML += `<button class="category-btn active" onclick="filterMenu('all', this)">${allText}</button>`;

  cats.forEach(c => {
    let display = c;
    if(currentLang === 'ar') {
      const map = {"Sandwiches":"ÿ≥ŸÜÿØŸàŸäÿ¥ÿßÿ™", "Burgers":"ÿ®ÿ±ÿ∫ÿ±", "Tacos":"ÿ™ÿßŸÉŸàÿ≥", "Tenders Box":"ÿ™ŸÜÿØÿ±ÿ≤", "Fries & Poutine":"ÿ®ÿ∑ÿßÿ∑ÿß Ÿàÿ®Ÿàÿ™ŸäŸÜ", "Bowls":"ÿ£ÿ∑ÿ®ÿßŸÇ", "Grill Chicken":"ÿØÿ¨ÿßÿ¨ ŸÖÿ¥ŸàŸä", "Party Box":"ÿ®ŸàŸÉÿ≥ ÿ≠ŸÅŸÑÿßÿ™", "Deep Dish Pizza":"ÿ®Ÿäÿ™ÿ≤ÿß ÿØŸäÿ® ÿØŸäÿ¥", "Boissons":"ŸÖÿ¥ÿ±Ÿàÿ®ÿßÿ™"};
      display = map[c] || c;
    }
    container.innerHTML += `<button class="category-btn" onclick="filterMenu('${c}', this)">${display}</button>`;
  });
}

function renderMenu(cat) {
  const grid = document.getElementById('menu-grid');
  grid.innerHTML = '';
  const items = cat === 'all' ? products : products.filter(p => p.cat === cat);
  
  items.forEach(p => {
    const card = document.createElement('div');
    card.className = 'menu-card';
    card.dataset.id = p.id; // Ajout du data-id pour identifier le produit
    
    card.innerHTML = `
      <div class="product-image-wrapper">
        <img src="${p.img}" class="product-image" loading="lazy" alt="${p.name[currentLang]}">
        ${(p.cat === 'Sandwiches' || p.cat === 'Burgers' || p.cat === 'Tacos') ? '<div class="card-badge">+ Menu Option</div>' : ''}
      </div>
      <div class="card-content">
        <div class="card-header">
          <div class="card-title">${p.name[currentLang]}</div>
        </div>
        <div class="card-desc">${p.desc[currentLang]}</div>
        <div class="card-footer">
          <div class="price">${p.price.toFixed(2)} DT</div>
          <button class="add-btn" data-product-id="${p.id}">
            <i class="fas fa-plus"></i>
          </button>
        </div>
      </div>
    `;
    grid.appendChild(card);
  });
  attachAddButtonListeners(); // R√©attacher apr√®s rendu dynamique
}

function attachAddButtonListeners() {
  const grid = document.getElementById('menu-grid');
  grid.removeEventListener('click', handleAddClick); // √âviter les doublons
  grid.addEventListener('click', handleAddClick);
}

function handleAddClick(e) {
  const btn = e.target.closest('.add-btn');
  if (!btn) return;
  
  const card = btn.closest('.menu-card');
  if (!card) return;
  
  const productId = btn.dataset.productId;
  const product = products.find(p => p.id === productId);
  
  if (product) {
    openProductModal(product);
  } else {
    console.warn('Produit non trouv√© pour ID:', productId);
  }
}

function filterMenu(cat, btn) {
  document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  renderMenu(cat);
}

function openProductModal(product) {
  let supps = [];
  if (['Sandwiches', 'Burgers'].includes(product.cat)) supps = commonSupplements;
  else if (product.cat === 'Tacos') supps = tacoSupplements;
  
  if(supps.length === 0) {
    addToCart(product, []);
    return;
  }
  currentProduct = product;
  currentSupplements = supps.map(s => ({...s, qty:0}));
  document.getElementById('modal-product-name').innerText = product.name[currentLang];
  renderSupplementsList();
  updateModalTotal();
  const modal = document.getElementById('supplements-modal');
  modal.style.display = 'flex';
  setTimeout(() => modal.classList.add('active'), 10);
}

function renderSupplementsList() {
  const container = document.getElementById('supplements-list');
  container.innerHTML = '';
  currentSupplements.forEach((s, idx) => {
    container.innerHTML += `
      <div class="supplement-row">
        <div>
          <div style="font-weight:600;">${s.name[currentLang]}</div>
          <div style="color:var(--primary); font-size:0.9rem;">+${s.price.toFixed(2)} DT</div>
        </div>
        <div class="qty-control">
          <button class="qty-btn" onclick="updateSuppQty(${idx}, -1)">-</button>
          <span class="qty-val">${s.qty}</span>
          <button class="qty-btn" onclick="updateSuppQty(${idx}, 1)">+</button>
        </div>
      </div>
    `;
  });
}

function updateSuppQty(idx, delta) {
  const s = currentSupplements[idx];
  if(s.qty + delta >= 0) {
    s.qty += delta;
    renderSupplementsList();
    updateModalTotal();
  }
}

function updateModalTotal() {
  let total = currentProduct.price;
  currentSupplements.forEach(s => total += (s.price * s.qty));
  document.getElementById('modal-total-price').innerText = total.toFixed(2) + " DT";
}

function closeModal() {
  const modal = document.getElementById('supplements-modal');
  modal.classList.remove('active');
  setTimeout(() => modal.style.display = 'none', 300);
}

function addToCartConfirm() {
  const activeSupps = currentSupplements.filter(s => s.qty > 0);
  addToCart(currentProduct, activeSupps);
  closeModal();
}

function addToCart(product, supps) {
  const suppKey = JSON.stringify(supps.map(s => ({id:s.id, qty:s.qty})));
  const existing = cart.find(i => i.pid === product.id && i.suppKey === suppKey);
  if(existing) existing.qty++;

  else cart.push({ pid: product.id, name: product.name, price: product.price, img: product.img, qty: 1, supps: supps, suppKey: suppKey });
  renderCart();
  showToast();
  document.getElementById('cart-panel').classList.add('open');
}

function renderCart() {
  const container = document.getElementById('cart-items');
  container.innerHTML = '';
  let total = 0;
  let count = 0;
  cart.forEach((item, index) => {
    let itemPrice = item.price;
    let suppText = '';
    item.supps.forEach(s => {
      itemPrice += (s.price * s.qty);
      suppText += `<div>+ ${s.name[currentLang]} (x${s.qty})</div>`;
    });
    const lineTotal = itemPrice * item.qty;
    total += lineTotal;
    count += item.qty;
    container.innerHTML += `
      <div class="cart-item">
        <img src="${item.img}" class="cart-item-img">
        <div class="cart-item-info">
          <span class="cart-item-title">${item.name[currentLang]} (x${item.qty})</span>
          ${suppText ? `<div class="cart-item-supps">${suppText}</div>` : ''}
          <div style="font-weight:700; margin-top:4px;">${lineTotal.toFixed(2)} DT</div>
        </div>
        <button class="remove-btn" onclick="removeItem(${index})"><i class="fas fa-trash"></i></button>
      </div>
    `;
  });
  document.getElementById('cart-total').innerText = total.toFixed(2) + " DT";
  document.getElementById('cart-count').innerText = count;
  if(cart.length === 0) container.innerHTML = `<div style="text-align:center; padding:2rem; opacity:0.6;">${currentLang==='ar'?'ÿßŸÑÿ≥ŸÑÿ© ŸÅÿßÿ±ÿ∫ÿ©':'Panier vide'}</div>`;
}

function removeItem(index) {
  cart.splice(index, 1);
  renderCart();
}

document.getElementById('confirm-order').onclick = () => {
  if(cart.length === 0) return;
  const tableInput = document.getElementById('table-number');
  if(orderMode === 'surplace' && !tableInput.value.trim()) {
    tableInput.style.borderColor = 'var(--danger)';
    tableInput.focus();
    setTimeout(() => tableInput.style.borderColor = '', 2000);
    return;
  }
  
  const todayStr = new Date().toDateString();
  const lastDate = localStorage.getItem('theguys_last_date');
  let orderCount = parseInt(localStorage.getItem('theguys_order_count') || '0');

  if(lastDate !== todayStr) {
    orderCount = 1;
    localStorage.setItem('theguys_last_date', todayStr);
  } else {
    orderCount++;
  }
  localStorage.setItem('theguys_order_count', orderCount);
  
  let orderTitle = "";
  if(currentLang === 'fr') orderTitle = `Nouvelle commande #${orderCount}`;
  else if(currentLang === 'en') orderTitle = `New Order #${orderCount}`;
  else orderTitle = `ÿ∑ŸÑÿ® ÿ¨ÿØŸäÿØ ÿ±ŸÇŸÖ ${orderCount}`;

  let msg = `*${orderTitle}*\n`;
  msg += `‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n`;
  msg += `üìÖ ${new Date().toLocaleString(currentLang)}\n`;
  msg += `üìç Type: *${orderMode === 'surplace' ? 'Sur Place (Table ' + tableInput.value + ')' : '√Ä Emporter'}*\n`;
  msg += `‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\n`;
  
  let grandTotal = 0;
  cart.forEach(item => {
    let itemTotal = item.price;
    item.supps.forEach(s => itemTotal += (s.price * s.qty));
    const lineTotal = itemTotal * item.qty;
    grandTotal += lineTotal;
    msg += `‚ñ´Ô∏è *${item.qty}x ${item.name.fr}*\n`;
    if(item.supps.length) {
      item.supps.forEach(s => msg += `   + ${s.name.fr} (x${s.qty})\n`);
    }
    msg += `   üí∞ ${lineTotal.toFixed(2)} DT\n\n`;
  });
  
  msg += `‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n`;
  msg += `*TOTAL: ${grandTotal.toFixed(2)} DT*`;
  
  window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`, '_blank');
  
  cart = [];
  renderCart();
  document.getElementById('cart-panel').classList.remove('open');
};

function setLang(l) {
  currentLang = l;
  document.documentElement.lang = l;
  document.documentElement.dir = l === 'ar' ? 'rtl' : 'ltr';
  document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
  event.target.classList.add('active');
  updateTexts();
  renderCategories();
  renderMenu('all');
  renderCart(); 
}

function updateTexts() {
  const t = translations[currentLang];
  document.getElementById('cart-title').innerText = t.cartTitle;
  document.getElementById('btn-order-text').innerText = t.order;
  document.getElementById('table-number').placeholder = t.placeholder;
  document.getElementById('success-message').innerText = t.added;
  document.querySelector('[data-mode="surplace"]').innerText = t.surplace;
  document.querySelector('[data-mode="emporter"]').innerText = t.emporter;
}

function setOrderMode(mode) {
  orderMode = mode;
  document.querySelectorAll('.mode-option').forEach(el => el.classList.remove('active'));
  document.querySelector(`[data-mode="${mode}"]`).classList.add('active');
  const tableWrap = document.getElementById('table-wrapper');
  if(mode === 'surplace') tableWrap.style.display = 'block';
  else tableWrap.style.display = 'none';
}

function showToast() {
  const t = document.getElementById('success-message');
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2500);
}

document.getElementById('cart-toggle').onclick = () => document.getElementById('cart-panel').classList.add('open');
document.getElementById('cart-close').onclick = () => document.getElementById('cart-panel').classList.remove('open');
document.getElementById('theme-toggle').onclick = () => {
  document.documentElement.classList.toggle('dark');
  const isDark = document.documentElement.classList.contains('dark');
  localStorage.setItem('theme', isDark ? 'dark' : 'light');
  updateThemeIcon();
};

function updateThemeIcon() {
  const isDark = document.documentElement.classList.contains('dark');
  const btn = document.getElementById('theme-toggle');
  btn.innerHTML = isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
}

init();
</script>
</body>
</html>
