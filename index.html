<!DOCTYPE html>
<html lang="fr" dir="ltr" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"/>
  <meta name="theme-color" content="#000000">
  <title>Menu â€¢ Da Pino's</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #FF4757;
      --bg-body: #F2F4F8;
      --bg-card: #FFFFFF;
      --bg-nav: rgba(255, 255, 255, 0.95);
      --text-main: #2F3542;
      --text-muted: #747D8C;
      --border: #DFE4EA;
      --shadow-sm: 0 2px 8px rgba(0,0,0,0.04);
      --radius: 16px;
      --toast-bg-dark: rgba(47, 53, 66, 0.95);
    }

    :root.dark {
      --primary: #FF4757;
      --bg-body: #000000;
      --bg-card: #141414;
      --bg-nav: rgba(20, 20, 20, 0.95);
      --text-main: #FFFFFF;
      --text-muted: #A4B0BE;
      --border: #2F3542;
      --shadow-sm: 0 2px 8px rgba(0,0,0,0.3);
      --toast-bg-dark: rgba(255, 255, 255, 0.95);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    
    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg-body);
      color: var(--text-main);
      padding-bottom: 100px;
      overflow-x: hidden;
    }

    /* â”€â”€â”€ HERO HEADER VIDEO (MODIFIÃ‰) â”€â”€â”€ */
    .hero-banner {
      height: 200px; /* Hauteur ajustÃ©e pour la vidÃ©o */
      width: 100%;
      position: relative;
      border-radius: 0 0 24px 24px;
      margin-bottom: 1rem;
      overflow: hidden; /* Important pour arrondir la vidÃ©o */
      background: #000; /* Fond noir pendant chargement */
    }

    /* La VidÃ©o en ArriÃ¨re-plan */
    .hero-video {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      object-fit: cover; /* Remplit tout sans dÃ©former */
      z-index: 0;
    }

    /* L'Overlay Sombre (DÃ©gradÃ© 40% -> 70%) */
    .hero-overlay {
      position: absolute; inset: 0;
      /* DÃ©gradÃ© semi-transparent noir pour lisibilitÃ© */
      background: linear-gradient(to bottom, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.7) 100%);
      display: flex; align-items: flex-end; padding: 1.5rem;
      z-index: 1; /* Au-dessus de la vidÃ©o */
    }
    
    /* Contenu (Logo + Texte) */
    .brand-container {
      display: flex;
      align-items: flex-end;
      gap: 15px;
      position: relative;
      z-index: 2; /* Au-dessus de l'overlay */
      width: 100%;
    }

    .brand-logo {
      width: 65px; 
      height: 65px; 
      border-radius: 14px; 
      border: 2px solid rgba(255,255,255,0.8); 
      object-fit: cover;
      background: #fff;
      box-shadow: 0 4px 20px rgba(0,0,0,0.4);
    }
    .brand-info h1 { color: white; font-size: 1.6rem; font-weight: 800; margin-bottom: 2px; line-height: 1.1; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
    .brand-info p { color: rgba(255,255,255,0.9); font-size: 0.85rem; font-weight: 500; text-shadow: 0 1px 2px rgba(0,0,0,0.5); }

    /* â”€â”€â”€ STICKY NAV â”€â”€â”€ */
    .sticky-header {
      position: sticky; top: 0; z-index: 100;
      background: var(--bg-body);
      padding-top: 0.5rem;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }
    .cat-list {
      display: flex; gap: 10px; overflow-x: auto; padding: 0 1rem 1rem;
      scrollbar-width: none;
    }
    .cat-item {
      padding: 0.6rem 1.1rem;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 99px;
      color: var(--text-muted);
      font-weight: 600;
      font-size: 0.85rem;
      white-space: nowrap;
      transition: 0.2s;
    }
    .cat-item.active { background: var(--text-main); color: var(--bg-body); border-color: var(--text-main); }

    /* â”€â”€â”€ MENU LIST â”€â”€â”€ */
    .menu-list { display: flex; flex-direction: column; gap: 1rem; padding: 0 1rem; }

    .dish-card {
      display: flex;
      background: var(--bg-card);
      border-radius: var(--radius);
      overflow: hidden;
      border: 1px solid var(--border);
      box-shadow: var(--shadow-sm);
      height: 100px;
    }
    .dish-img { width: 100px; height: 100%; object-fit: cover; }
    .dish-content {
      flex: 1;
      padding: 0.7rem;
      display: flex; flex-direction: column; justify-content: space-between;
    }
    .dish-title { font-weight: 700; font-size: 0.95rem; line-height: 1.2; margin-bottom: 2px; }
    .dish-desc { font-size: 0.75rem; color: var(--text-muted); display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical; overflow: hidden; }
    .dish-footer { display: flex; justify-content: space-between; align-items: center; margin-top: auto; }
    .dish-price { font-weight: 800; font-size: 1rem; color: var(--primary); }
    
    /* BOUTON AJOUTER */
    .add-btn { 
      width: 42px; height: 42px;
      border-radius: 12px; 
      background: var(--bg-body); 
      border: 1px solid var(--border); 
      color: var(--primary); 
      display: grid; place-items: center; cursor: pointer; 
      font-size: 1.1rem;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      transition: transform 0.1s, background 0.2s; 
    }
    .add-btn:active { transform: scale(0.9); background: var(--primary); color: white; }

    /* â”€â”€â”€ BOTTOM NAV â”€â”€â”€ */
    .bottom-nav {
      position: fixed; bottom: 0; left: 0; width: 100%;
      background: var(--bg-nav);
      backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
      border-top: 1px solid var(--border);
      display: flex; justify-content: space-around;
      padding: 0.8rem 0 calc(0.8rem + env(safe-area-inset-bottom));
      z-index: 999;
    }
    .nav-btn { background: none; border: none; display: flex; flex-direction: column; align-items: center; gap: 4px; color: var(--text-muted); font-size: 0.7rem; font-weight: 600; position: relative; }
    .nav-btn i { font-size: 1.2rem; }
    .nav-btn.active { color: var(--primary); }
    .cart-badge { position: absolute; top: -5px; right: 8px; background: var(--primary); color: white; font-size: 0.6rem; width: 16px; height: 16px; border-radius: 50%; display: flex; align-items: center; justify-content: center; opacity: 0; transform: scale(0); transition: 0.3s; }
    .cart-badge.show { opacity: 1; transform: scale(1); }

    /* â”€â”€â”€ CART DRAWER â”€â”€â”€ */
    .drawer-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 2000; opacity: 0; pointer-events: none; transition: 0.3s; backdrop-filter: blur(3px); }
    .drawer-overlay.open { opacity: 1; pointer-events: auto; }
    
    .cart-panel {
      position: fixed; bottom: 0; left: 0; width: 100%;
      background: var(--bg-card);
      border-radius: 24px 24px 0 0;
      padding: 1.5rem; padding-bottom: calc(1.5rem + env(safe-area-inset-bottom));
      transform: translateY(100%); transition: 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
      z-index: 2001; max-height: 90vh; display: flex; flex-direction: column;
    }
    .drawer-overlay.open .cart-panel { transform: translateY(0); }

    .order-options { display: flex; gap: 10px; margin-bottom: 1rem; background: var(--bg-body); padding: 5px; border-radius: 12px; }
    .option-label { flex: 1; text-align: center; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 0.9rem; color: var(--text-muted); transition: 0.2s; }
    input[type="radio"] { display: none; }
    input[type="radio"]:checked + .option-label { background: var(--bg-card); color: var(--text-main); box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    
    .table-input-group { margin-bottom: 1rem; display: none; animation: fadeIn 0.3s ease; }
    .table-input-group.show { display: block; }
    
    .form-input { 
      width: 100%; padding: 14px; border-radius: 12px; 
      border: 1px solid var(--border); background: var(--bg-body); 
      color: var(--text-main); font-size: 1rem; outline: none; 
      transition: border-color 0.2s;
    }
    .form-input:focus { border-color: var(--primary); }

    /* BOUTON WHATSAPP XL */
    .btn-whatsapp { 
      background: linear-gradient(135deg, #25D366 0%, #20ba5a 100%);
      color: white; border: none; 
      padding: 1.4rem; 
      width: 100%; border-radius: 18px; 
      font-weight: 800; font-size: 1.15rem; 
      display: flex; align-items: center; justify-content: center; gap: 12px; 
      transition: transform 0.2s, box-shadow 0.2s;
      box-shadow: 0 8px 20px rgba(37, 211, 102, 0.35);
    }
    .btn-whatsapp:active { transform: scale(0.97); box-shadow: 0 4px 10px rgba(37, 211, 102, 0.2); }

    .btn-trash {
      width: 28px; height: 28px; border-radius: 8px; border: none;
      background: rgba(255, 71, 87, 0.1); color: #ff4757;
      cursor: pointer; display: flex; align-items: center; justify-content: center;
      margin-right: 10px; transition: 0.2s;
    }
    .btn-trash:active { transform: scale(0.9); background: rgba(255, 71, 87, 0.25); }
    :root.dark .btn-trash { background: rgba(255, 71, 87, 0.2); }

    /* â”€â”€â”€ TOAST â”€â”€â”€ */
    #toast-container {
      position: fixed; bottom: 100px; left: 50%; transform: translateX(-50%);
      z-index: 3000; display: flex; flex-direction: column; gap: 10px;
      pointer-events: none; width: 100%; max-width: 380px; align-items: center; padding: 0 20px;
    }

    .toast {
      background: var(--toast-bg-dark); color: var(--bg-body);
      padding: 12px 24px; border-radius: 50px; font-weight: 600; font-size: 0.9rem;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
      display: flex; align-items: center; gap: 10px;
      opacity: 0; transform: translateY(20px) scale(0.95);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    :root.dark .toast { color: #000; } 
    .toast.show { opacity: 1; transform: translateY(0) scale(1); }
    .toast.success { background: #25D366; color: white; }
    .toast i { font-size: 1.1rem; }

    /* â”€â”€â”€ FOOTER â”€â”€â”€ */
    .app-footer {
      text-align: center;
      padding: 2rem 1rem 6rem;
      background: var(--bg-body);
      border-top: 1px solid var(--border);
      margin-top: 2rem;
    }
    .footer-logo { font-weight: 800; font-size: 1.2rem; margin-bottom: 0.5rem; display: block; color: var(--text-main); }
    .footer-socials { display: flex; justify-content: center; gap: 1.5rem; margin: 1rem 0; }
    .social-link {
      width: 40px; height: 40px; border-radius: 50%;
      background: var(--bg-card); border: 1px solid var(--border);
      color: var(--text-main); display: flex; align-items: center; justify-content: center;
      font-size: 1.2rem; transition: 0.3s;
    }
    .social-link:hover { background: var(--primary); color: white; border-color: var(--primary); transform: translateY(-3px); }
    .footer-copy { font-size: 0.8rem; color: var(--text-muted); }

    @keyframes fadeIn { from{opacity:0;transform:translateY(-5px)} to{opacity:1;transform:translateY(0)} }
  </style>
</head>
<body>

  <div class="hero-banner">
    <video class="hero-video" autoplay muted loop playsinline poster="image/dapinos log.jpeg">
      <source src="video/food.mp4" type="video/mp4">
    </video>

    <div class="hero-overlay">
      <div class="brand-container">
        <img src="image/dapinos log.jpeg" alt="Logo" class="brand-logo">
        <div class="brand-info">
          <h1>Da Pino's</h1>
          <p>Cuisine Tunisienne & Italienne</p>
        </div>
      </div>
    </div>
  </div>

  <div class="sticky-header">
    <div class="cat-list" id="cat-list"></div>
  </div>

  <main class="menu-list" id="menu-list"></main>

  <footer class="app-footer">
    <span class="footer-logo">Da Pino's</span>
    <div class="footer-socials">
      <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
      <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
      <a href="#" class="social-link"><i class="fas fa-globe"></i></a>
    </div>
    <p class="footer-copy">Â© 2026 Da Pino's. Fait avec <i class="fas fa-heart" style="color:var(--primary)"></i> Ã  Tunis.</p>
  </footer>

  <nav class="bottom-nav">
    <button class="nav-btn active" onclick="window.scrollTo(0,0)">
      <i class="fas fa-utensils"></i>
      <span>Menu</span>
    </button>
    <button class="nav-btn" onclick="openCart()">
      <i class="fas fa-shopping-bag"></i>
      <span class="cart-badge" id="nav-badge">0</span>
      <span>Panier</span>
    </button>
    <button class="nav-btn" onclick="toggleTheme()">
      <i class="fas fa-moon" id="theme-icon"></i>
      <span>Mode</span>
    </button>
  </nav>

  <div class="drawer-overlay" id="drawer">
    <div class="drawer-bg" style="position:absolute;inset:0" onclick="closeCart()"></div>
    <div class="cart-panel">
      <div style="display:flex; justify-content:space-between; margin-bottom:1rem">
        <h2 style="font-size:1.3rem; font-weight:800">Votre Panier</h2>
        <i class="fas fa-times" onclick="closeCart()" style="font-size:1.2rem; cursor:pointer"></i>
      </div>

      <div class="order-options">
        <input type="radio" name="orderType" id="opt-surplace" value="Sur Place" onchange="toggleTableInput()">
        <label for="opt-surplace" class="option-label"><i class="fas fa-chair"></i> Sur Place</label>
        <input type="radio" name="orderType" id="opt-emporter" value="A Emporter" checked onchange="toggleTableInput()">
        <label for="opt-emporter" class="option-label"><i class="fas fa-shopping-bag"></i> A Emporter</label>
      </div>

      <div style="display:flex; flex-direction:column; gap:10px; margin-bottom:1rem;">
        <div class="table-input-group" id="table-group">
          <input type="number" id="table-num" class="form-input" placeholder="ðŸ“ NumÃ©ro de table (ex: 5)">
        </div>
      </div>
      
      <div id="cart-items" style="flex:1; overflow-y:auto; margin-bottom:1rem"></div>
      
      <div style="border-top:1px solid var(--border); padding-top:1rem">
        <div style="display:flex; justify-content:space-between; font-weight:800; font-size:1.2rem; margin-bottom:1rem">
          <span>Total</span>
          <span id="cart-total">0.00 DT</span>
        </div>
        <button class="btn-whatsapp" onclick="order()">
          <i class="fab fa-whatsapp" style="font-size:1.6rem"></i> Commander via WhatsApp
        </button>
      </div>
    </div>
  </div>

  <div id="toast-container"></div>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// CONFIG & DATA
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const WHATSAPP_NUMBER = "21658052184"; 

const menu = [
  // TAGINES NON SUCRÃ‰S
  {id:101, cat:"Tagines SalÃ©s", name:"Tagine dâ€™agneau aux lÃ©gumes", price:42, img:"image/Tagine de veau aux lÃ©gumes.jpg"},
  {id:102, cat:"Tagines SalÃ©s", name:"Tagine agneau, petits pois & artichaut", price:44, img:"image/Tagine agneau, petits pois & artichaut.jpg"},
  {id:103, cat:"Tagines SalÃ©s", name:"Tagine poulet, petits pois & artichaut", price:32, img:"image/Tagine poulet aux figues.jpg"},
  {id:104, cat:"Tagines SalÃ©s", name:"Tagine kefta aux Å“ufs", price:36, img:"image/Tagine kefta aux Å“ufs.jpg"},
  {id:105, cat:"Tagines SalÃ©s", name:"Tagine agneau olives & citron", price:40, img:"image/Tagine agneau olives & citron.jpg"},
  {id:106, cat:"Tagines SalÃ©s", name:"Tagine poulet olives & citron", price:28, img:"image/Tagine poulet olives & citron.jpg"},
  {id:107, cat:"Tagines SalÃ©s", name:"Tagine vÃ©gÃ©tarien", price:20, img:"image/Tagine vÃ©gÃ©tarien.jpg"},
  {id:108, cat:"Tagines SalÃ©s", name:"Tagine poulet aux lÃ©gumes", price:28, img:"image/Tagine poulet aux lÃ©gumes.jpg"},
  {id:109, cat:"Tagines SalÃ©s", name:"Tagine de poisson", desc:"Dorade, Loup selon lâ€™arrivÃ©e", price:32, img:"image/Tagine de poisson.jpg"},
  {id:110, cat:"Tagines SalÃ©s", name:"Tagine de veau aux lÃ©gumes", price:42, img:"image/Tagine de veau aux lÃ©gumes.jpg"},

  // TAGINES SUCRÃ‰S
  {id:201, cat:"Tagines SucrÃ©s", name:"Tagine lâ€™Oasis", desc:"Agneau/poulet & fruits secs", price:46, img:"image/Tagine lâ€™Oasis.jpg"},
  {id:202, cat:"Tagines SucrÃ©s", name:"Tagine agneau pruneaux & amandes", price:45, img:"image/Tagine agneau pruneaux & amandes.jpg"},
  {id:203, cat:"Tagines SucrÃ©s", name:"Tagine poulet pruneaux & amandes", price:38, img:"image/Tagine poulet pruneaux & amandes.jpg"},
  {id:204, cat:"Tagines SucrÃ©s", name:"Tagine poulet abricots & amandes", price:38, img:"image/Tagine poulet abricots & amandes.jpg"},
  {id:205, cat:"Tagines SucrÃ©s", name:"Tagine poulet raisins & oignons", price:36, img:"image/Tagine poulet raisins & oignons.jpg"},
  {id:206, cat:"Tagines SucrÃ©s", name:"Tagine de veau raisins & oignons", price:44, img:"image/Tagine de veau aux figues.jpg"},
  {id:207, cat:"Tagines SucrÃ©s", name:"Tagine de veau aux figues", price:44, img:"image/Tagine poulet aux figues.jpg"},
  {id:208, cat:"Tagines SucrÃ©s", name:"Tagine poulet aux figues", price:36, img:"image/Tagine poulet aux figues.jpg"},
  {id:209, cat:"Tagines SucrÃ©s", name:"Tagine de veau pruneaux & amandes", price:42, img:"image/Tagine de veau pruneaux & amandes.jpg"},

  // COUSCOUS
  {id:301, cat:"Couscous", name:"Couscous au choix", price:42, img:"image/Couscous au choix.jpg"},

  // PANUOZZO
  {id:401, cat:"Panuozzo", name:"Panuozzo Poulet GrillÃ©", price:10.5, img:"image/Panuozzo Poulet GrillÃ©.jpg"},
  {id:402, cat:"Panuozzo", name:"Panuozzo Poulet PanÃ©", price:10.5, img:"image/Panuozzo Poulet PanÃ©.jpg"},
  {id:403, cat:"Panuozzo", name:"Panuozzo Jambon", price:10.5, img:"image/Panuozzo Jambon.jpg"},
  {id:404, cat:"Panuozzo", name:"Panuozzo Kebab", price:11.0, img:"image/Panuozzo Kebab.jpg"},
  {id:405, cat:"Panuozzo", name:"Panuozzo Thon", price:12.0, img:"image/Panuozzo Thon.jpg"},
  {id:406, cat:"Panuozzo", name:"Panuozzo Le Gourmand", price:12.5, img:"image/Panuozzo Le Gourmand.jpg"},

  // CIABATTA
  {id:501, cat:"Ciabatta", name:"Ciabatta Poulet GrillÃ©", price:10.5, img:"image/Ciabatta Poulet GrillÃ©.jpg"},
  {id:502, cat:"Ciabatta", name:"Ciabatta The Crispy", price:10.5, img:"image/Ciabatta The Crispy.jpg"},
  {id:503, cat:"Ciabatta", name:"Ciabatta Jambon", price:10.5, img:"image/Ciabatta Jambon.jpg"},
  {id:504, cat:"Ciabatta", name:"Ciabatta MonÃ©gasque", price:12.0, img:"image/Ciabatta MonÃ©gasque.jpg"},

  // ETTOUNSI
  {id:601, cat:"Ettounsi", name:"Sandwich Thon", price:9.8, img:"image/sandwich thon.jpg"},
  {id:602, cat:"Ettounsi", name:"Sandwich Merguez", price:9.8, img:"image/sandwochs Chawarma.jpg"},
  {id:603, cat:"Ettounsi", name:"Sandwich Poulet", price:10.5, img:"image/sandwichs Escalope2.jpg"},
  {id:604, cat:"Ettounsi", name:"Sandwich Kebab", price:11.5, img:"image/sandwitsh spÃ©cial.jpg"}
];

const categories = [...new Set(menu.map(i => i.cat))];
let cart = [];
let activeCat = categories[0];

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// LOGIC
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function init() {
  renderCats();
  renderMenu();
}

function renderCats() {
  const html = categories.map(c => 
    `<button class="cat-item ${c === activeCat ? 'active' : ''}" onclick="filter('${c}')">${c}</button>`
  ).join('');
  document.getElementById('cat-list').innerHTML = html;
}

function filter(c) {
  activeCat = c;
  renderCats();
  renderMenu();
}

function renderMenu() {
  const grid = document.getElementById('menu-list');
  const items = menu.filter(i => i.cat === activeCat);

  grid.innerHTML = items.map(item => `
    <div class="dish-card">
      <img src="${item.img}" class="dish-img" loading="lazy">
      <div class="dish-content">
        <div>
          <div class="dish-title">${item.name}</div>
          <div class="dish-desc">${item.desc || item.cat}</div>
        </div>
        <div class="dish-footer">
          <div class="dish-price">${item.price.toFixed(1)} DT</div>
          <button class="add-btn" onclick="add(${item.id})">
            <i class="fas fa-plus"></i>
          </button>
        </div>
      </div>
    </div>
  `).join('');
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// TOAST NOTIFICATIONS
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showToast(message, type = 'normal') {
  const container = document.getElementById('toast-container');
  const toast = document.createElement('div');
  toast.className = `toast ${type}`;
  
  const icon = type === 'success' ? 'fa-check-circle' : 'fa-cart-plus';
  toast.innerHTML = `<i class="fas ${icon}"></i> <span>${message}</span>`;
  
  container.appendChild(toast);
  requestAnimationFrame(() => toast.classList.add('show'));

  if (navigator.vibrate) navigator.vibrate(type === 'success' ? [50, 50, 50] : 30);

  setTimeout(() => {
    toast.classList.remove('show');
    setTimeout(() => { if(toast.parentNode) toast.parentNode.removeChild(toast); }, 400); 
  }, 2500);
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// CART ACTIONS
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function add(id) {
  const product = menu.find(i => i.id === id);
  const existing = cart.find(i => i.id === id);
  if(existing) existing.qty++;
  else cart.push({...product, qty: 1});
  
  updateCart();
  showToast("Produit ajoutÃ© au panier ðŸ›’");
}

function removeItem(id) {
  cart = cart.filter(i => i.id !== id);
  updateCart();
  showToast("Produit supprimÃ©", "normal");
}

function updateCart() {
  const count = cart.reduce((a,b)=>a+b.qty,0);
  const badge = document.getElementById('nav-badge');
  badge.textContent = count;
  badge.classList.toggle('show', count > 0);

  const container = document.getElementById('cart-items');
  let total = 0;
  
  if(cart.length === 0) {
    container.innerHTML = `<div style="text-align:center; padding:2rem; color:var(--text-muted)">Panier vide...</div>`;
  } else {
    container.innerHTML = cart.map(item => {
      total += item.price * item.qty;
      return `
      <div style="display:flex; justify-content:space-between; align-items:center; padding:10px 0; border-bottom:1px solid var(--border)">
        <div style="flex:1">
          <div style="font-weight:700; font-size:0.9rem">${item.name}</div>
          <div style="font-size:0.8rem; color:var(--text-muted)">${item.price} DT x ${item.qty}</div>
        </div>
        <div style="display:flex; align-items:center;">
          <button class="btn-trash" onclick="removeItem(${item.id})"><i class="fas fa-trash-alt"></i></button>
          <div style="display:flex; align-items:center; gap:8px">
            <button onclick="modQty(${item.id}, -1)" style="border:none;background:var(--bg-body);width:26px;height:26px;border-radius:6px;color:var(--text-main)">-</button>
            <span style="font-weight:700; font-size:0.9rem; min-width:15px; text-align:center">${item.qty}</span>
            <button onclick="modQty(${item.id}, 1)" style="border:none;background:var(--primary);color:white;width:26px;height:26px;border-radius:6px">+</button>
          </div>
        </div>
      </div>`;
    }).join('');
  }
  document.getElementById('cart-total').textContent = total.toFixed(1) + ' DT';
}

function modQty(id, delta) {
  const idx = cart.findIndex(i => i.id === id);
  cart[idx].qty += delta;
  if(cart[idx].qty <= 0) cart.splice(idx, 1);
  updateCart();
}

function openCart() { document.getElementById('drawer').classList.add('open'); }
function closeCart() { document.getElementById('drawer').classList.remove('open'); }

function toggleTableInput() {
  const isSurPlace = document.getElementById('opt-surplace').checked;
  const group = document.getElementById('table-group');
  if(isSurPlace) group.classList.add('show');
  else group.classList.remove('show');
}

function toggleTheme() {
  document.documentElement.classList.toggle('dark');
  const isDark = document.documentElement.classList.contains('dark');
  document.getElementById('theme-icon').className = isDark ? 'fas fa-sun' : 'fas fa-moon';
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ORDER LOGIC (AUTO-SEND NO PHONE)
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function order() {
  if(cart.length === 0) {
    showToast("Votre panier est vide !", "error");
    return;
  }

  const type = document.querySelector('input[name="orderType"]:checked').value;
  const table = document.getElementById('table-num').value;
  
  if(type === 'Sur Place' && !table) {
    alert("Veuillez entrer votre numÃ©ro de table ðŸ“");
    return;
  }

  showToast("Commande envoyÃ©e avec succÃ¨s âœ…", "success");
  closeCart();

  // Data Generation
  const orderId = "#CMD-" + Math.floor(1000 + Math.random() * 9000); 
  const now = new Date().toLocaleString('fr-FR', { dateStyle: 'short', timeStyle: 'short' });

  // Message Construction
  let msg = `ðŸ§¾ *COMMANDE ${orderId}*\n`;
  msg += `ðŸ•’ ${now}\n`;
  msg += `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n`;
  msg += `ðŸ·ï¸ Type : *${type.toUpperCase()}*\n`;
  if(type === 'Sur Place') msg += `ðŸ“ Table : *${table}*\n`;
  
  msg += `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n`;
  msg += `*DÃ‰TAIL DE LA COMMANDE :*\n\n`;

  let total = 0;
  cart.forEach(i => {
    const lineTotal = i.price * i.qty;
    total += lineTotal;
    msg += `â–«ï¸ *${i.qty}x ${i.name}*\n`;
    msg += `   â””â”€ ${lineTotal.toFixed(1)} DT\n`;
  });

  msg += `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n`;
  msg += `ðŸ’° *TOTAL Ã€ PAYER : ${total.toFixed(1)} DT*\n`;
  msg += `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n`;
  msg += `Merci de votre confiance !`;

  // Envoi WhatsApp Automatique
  setTimeout(() => {
    window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`, '_blank');
  }, 1000);
}

// Start
init();
</script>
</body>
</html>
